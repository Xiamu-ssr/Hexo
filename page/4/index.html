<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="theme-color" content="#123456"><title>Hexo</title><link rel="manifest" href="/Hexo/manifest.json"><meta name="theme-color" content="#1E1E1E"><meta name="application-name" content="å¤æœ¨çš„ä¸ªäººåšå®¢-è®°å½•"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#1E1E1E"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="å¤æœ¨çš„ä¸ªäººåšå®¢-è®°å½•"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="https://xiamu-ssr.github.io/Hexo"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xiamu-ssr.github.io/Hexo/img/og_image.png"><meta property="article:author" content="Xiamu"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://xiamu-ssr.github.io/Hexo/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://xiamu-ssr.github.io/Hexo"},"headline":"Hexo","image":["https://xiamu-ssr.github.io/Hexo/img/og_image.png"],"author":{"@type":"Person","name":"Xiamu"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"https://xiamu-ssr.github.io/img/logo.svg"}},"description":""}</script><link rel="icon" href="/Hexo/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/Hexo/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/Hexo/"><img src="/Hexo/img/logo.svg" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/Hexo/">Home</a><a class="navbar-item" href="/Hexo/archives">Archives</a><a class="navbar-item" href="/Hexo/categories">Categories</a><a class="navbar-item" href="/Hexo/tags">Tags</a><a class="navbar-item" href="/Hexo/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Xiamu-ssr/Hexo"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/22/2024-H1/2024-04-22-20-24-27/"><img class="fill" src="/Hexo/2024/04/22/2024-H1/2024-04-22-20-24-27/1718889196973.png" alt="ruoyi-cloud-plusæ·»åŠ ä¸€ä¸ªä¸è¦è®¤è¯çš„å…¬å¼€æ–°é¡µé¢"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-22T20:24:27.000Z" title="4/22/2024, 8:24:27 PM">2024-04-22</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.390Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringCloud/">SpringCloud</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringCloud/RuoYi-Cloud-Plus/">RuoYi-Cloud-Plus</a></span><span class="level-item">4 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦525ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/22/2024-H1/2024-04-22-20-24-27/">ruoyi-cloud-plusæ·»åŠ ä¸€ä¸ªä¸è¦è®¤è¯çš„å…¬å¼€æ–°é¡µé¢</a></p><div class="content"><table>
<thead>
<tr>
<th></th>
<th>ç‰ˆæœ¬</th>
</tr>
</thead>
<tbody><tr>
<td>RuoYiCloudPlus</td>
<td>v2.1.2</td>
</tr>
<tr>
<td>plus-ui</td>
<td>Vue3 ts</td>
</tr>
</tbody></table>
<p>ä»¥æ–°å¢ä¸€ä¸ªå…¬å¼€çš„è¯¾ç¨‹æœç´¢é¡µé¢ä¸ºä¾‹ã€‚</p>
<h1 id="ä¸€ã€å‰ç«¯"><a href="#ä¸€ã€å‰ç«¯" class="headerlink" title="ä¸€ã€å‰ç«¯"></a>ä¸€ã€å‰ç«¯</h1><h2 id="1-ç»„ä»¶åˆ›å»º"><a href="#1-ç»„ä»¶åˆ›å»º" class="headerlink" title="1. ç»„ä»¶åˆ›å»º"></a>1. ç»„ä»¶åˆ›å»º</h2><p>åœ¨viewç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé¡µé¢çš„vueä»£ç ï¼Œæ¯”å¦‚</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/views/customer/searchPage/index.vue</span><br></pre></td></tr></table></figure>

<h2 id="2-src-router-index-ts"><a href="#2-src-router-index-ts" class="headerlink" title="2. src&#x2F;router&#x2F;index.ts"></a>2. src&#x2F;router&#x2F;index.ts</h2><p>ä¸ºå…¶ç¼–åˆ¶ä¸€ä¸ªè·¯ç”±ã€‚åœ¨constantRoutesä¸­æ·»åŠ ä¸€ç»„dictä¿¡æ¯ã€‚æ¯”å¦‚</p>
<figure class="highlight plaintext"><figcaption><span>language-typescript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    path: &#x27;/courseSearch&#x27;,</span><br><span class="line">    component: () =&gt; import(&#x27;@/views/customer/searchPage/index.vue&#x27;),</span><br><span class="line">    hidden: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="3-src-permission-ts"><a href="#3-src-permission-ts" class="headerlink" title="3. src&#x2F;permission.ts"></a>3. src&#x2F;permission.ts</h2><p>æŠŠé¡µé¢åŠ å…¥å‰ç«¯çš„<code>whiteList</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-typescript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const whiteList = [</span><br><span class="line">  &#x27;/login&#x27;,</span><br><span class="line">  &#x27;/register&#x27;,</span><br><span class="line">  &#x27;/social-callback&#x27;,</span><br><span class="line">  &#x27;/courseSearch&#x27;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>åœ¨æµè§ˆå™¨è¾“å…¥<code>http://localhost/courseSearch</code>ï¼Œè‡³æ­¤è¿™ä¸ªé¡µé¢å·²ç»ä¸ç”¨ç™»å½•å°±å¯ä»¥è®¿é—®äº†ã€‚</p>
<h1 id="äºŒã€åç«¯"><a href="#äºŒã€åç«¯" class="headerlink" title="äºŒã€åç«¯"></a>äºŒã€åç«¯</h1><p>ä½†æ˜¯åç«¯æ˜¯æœ‰ç½‘å…³å’Œè®¤è¯æ¨¡å—çš„ï¼Œè™½ç„¶å‰ç«¯é¡µé¢å¯ä»¥ä¸ç”¨ç™»é™†äº†ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªé¡µé¢è¿˜éœ€è¦ä»åç«¯è·å–æ•°æ®ï¼Œé‚£ä¹ˆåç«¯å¯¹åº”çš„<code>controller</code>ä¹Ÿåº”è¯¥è¢«openã€‚</p>
<h2 id="1-è®¾è®¡æ€æƒ³"><a href="#1-è®¾è®¡æ€æƒ³" class="headerlink" title="1. è®¾è®¡æ€æƒ³"></a>1. è®¾è®¡æ€æƒ³</h2><p>ä¸åŒæ¨¡å—æœ‰ä¸åŒçš„<code>url</code>å‰ç¼€ï¼Œæ¯”å¦‚</p>
<figure class="highlight plaintext"><figcaption><span>language-txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">routes:</span><br><span class="line">   # è®¤è¯ä¸­å¿ƒ</span><br><span class="line">   - id: ruoyi-auth</span><br><span class="line">     uri: lb://ruoyi-auth</span><br><span class="line">     predicates:</span><br><span class="line">       - Path=/auth/**</span><br><span class="line">     filters:</span><br><span class="line">       - StripPrefix=1</span><br><span class="line">   # ä»£ç ç”Ÿæˆ</span><br><span class="line">   - id: ruoyi-gen</span><br><span class="line">     uri: lb://ruoyi-gen</span><br><span class="line">     predicates:</span><br><span class="line">       - Path=/tool/**</span><br><span class="line">     filters:</span><br><span class="line">       - StripPrefix=1</span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”æ¯ä¸ªæ¨¡å—éƒ½æœ‰å¯èƒ½éœ€è¦openä¸€äº›controllerï¼Œä¸éœ€è¦è®¤è¯ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿›è¡Œç»Ÿä¸€è®¾å®šï¼Œæ¯”å¦‚è¯¾ç¨‹æ¨¡å—ï¼Œurlå‰ç¼€ä¸º<code>course</code>ï¼Œé‚£ä¹ˆ<code>/course/open/**</code>å°±éƒ½æ˜¯è¢«å…¬å¼€çš„ç«¯ç‚¹ã€‚äºæ˜¯åœ¨gatewayåªéœ€è¦æŠŠ<code>/*/open/**</code>åŠ å…¥ç™½åå•å³å¯ã€‚</p>
<h2 id="2-ruoyi-gateway-yml"><a href="#2-ruoyi-gateway-yml" class="headerlink" title="2. ruoyi-gateway.yml"></a>2. ruoyi-gateway.yml</h2><p>åœ¨nacosä¸­ä¿®æ”¹gatewayçš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠ<code>/*/open/**</code>åŠ å…¥whitesã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">security:</span><br><span class="line">	ignore:</span><br><span class="line">		whites:</span><br><span class="line">			- /auth/code</span><br><span class="line">			- /auth/logout</span><br><span class="line">			- /auth/login</span><br><span class="line">			- /auth/binding/*</span><br><span class="line">			- /auth/social/callback</span><br><span class="line">			- /auth/register</span><br><span class="line">			- /auth/tenant/list</span><br><span class="line">			- /resource/sms/code</span><br><span class="line">			- /*/v3/api-docs</span><br><span class="line">			- /*/error</span><br><span class="line">			- /csrf</span><br><span class="line">			- /*/open/**</span><br></pre></td></tr></table></figure>

<h2 id="3-å¼€å‘Controller"><a href="#3-å¼€å‘Controller" class="headerlink" title="3. å¼€å‘Controller"></a>3. å¼€å‘Controller</h2><p>åœ¨courseæ¨¡å—ä¸­ï¼Œæ–°å»ºä¸€ä¸ª<code>CourseOpenController.java</code>ï¼Œå†…å®¹ç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package org.dromara.course.controller;</span><br><span class="line"></span><br><span class="line">import org.dromara.course.domain.bo.CourseCategoryBo;</span><br><span class="line">import org.dromara.course.domain.vo.CourseCategoryVo;</span><br><span class="line">import org.dromara.course.service.CourseCategoryService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/open&quot;)</span><br><span class="line">public class CourseOpenController &#123;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    CourseCategoryService categoryService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/category/list&quot;)</span><br><span class="line">    public List&lt;CourseCategoryVo&gt; list(CourseCategoryBo bo) &#123;</span><br><span class="line">   </span><br><span class="line">        return categoryService.queryList(bo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é‡å¯ç½‘å…³å’Œè¯¾ç¨‹æ¨¡å—å³å¯ã€‚</p>
<img src="/Hexo/2024/04/22/2024-H1/2024-04-22-20-24-27/1718889196973.png" class="" title="This is an example image">

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/22/2024-H1/2024-04-22-13-17-20/"><img class="fill" src="/Hexo/2024/04/22/2024-H1/2024-04-22-13-17-20/1718889208668.png" alt="Vue3ç‚«é…·å•†å“å¡ç‰Œ ç»„ä»¶è®¾è®¡"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-22T13:17:20.000Z" title="4/22/2024, 1:17:20 PM">2024-04-22</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.382Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/Front-End/">Front-End</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/Front-End/Vue/">Vue</a></span><span class="level-item">5 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦715ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/22/2024-H1/2024-04-22-13-17-20/">Vue3ç‚«é…·å•†å“å¡ç‰Œ ç»„ä»¶è®¾è®¡</a></p><div class="content"><p>æ„Ÿè°¢æ¥è‡ª<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44879989/article/details/128761060">BinaryMoon-CSS è‰ºæœ¯ä¹‹æš—ç³»é­”å¹»å¡ç‰Œ</a>çš„åšæ–‡ã€‚ğŸ’•</p>
<h1 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h1><img src="/Hexo/2024/04/22/2024-H1/2024-04-22-13-17-20/1718889208668.png" class="" title="This is an example image">

<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>æ¥å£ç±»å‹</p>
<figure class="highlight plaintext"><figcaption><span>language-typescript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">export interface CourseBaseVO &#123;</span><br><span class="line">   </span><br><span class="line">  /**</span><br><span class="line">   * ä¸»é”®</span><br><span class="line">   */</span><br><span class="line">  id: string | number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * æœºæ„ID</span><br><span class="line">   */</span><br><span class="line">  companyId: string | number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * è¯¾ç¨‹åç§°</span><br><span class="line">   */</span><br><span class="line">  name: string;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * å¤§åˆ†ç±»</span><br><span class="line">   */</span><br><span class="line">  mt: string;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * å°åˆ†ç±»</span><br><span class="line">   */</span><br><span class="line">  st: string;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * è¯¾ç¨‹å›¾ç‰‡</span><br><span class="line">   */</span><br><span class="line">  pic: string;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * æ˜¯å¦æ”¶è´¹</span><br><span class="line">   */</span><br><span class="line">  charge: boolean;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * åŸä»·</span><br><span class="line">   */</span><br><span class="line">  originalPrice: number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç°ä»·</span><br><span class="line">   */</span><br><span class="line">  price: number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * è¯„åˆ†</span><br><span class="line">   */</span><br><span class="line">  star: number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * UNPUBLISHED(1, &quot;æœªå‘å¸ƒ&quot;),     UNDER_REVIEW(2, &quot;å®¡æ ¸ä¸­&quot;),     REVIEW_FAILED(3, &quot;å®¡æ ¸ä¸é€šè¿‡&quot;),     REVIEW_PASSED(4, &quot;å®¡æ ¸é€šè¿‡&quot;)</span><br><span class="line">   */</span><br><span class="line">  status: number;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * å®¡æ ¸æ„è§</span><br><span class="line">   */</span><br><span class="line">  mind: string;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">interface CourseBaseExtraHotVo extends CourseBaseVO &#123;</span><br><span class="line">   </span><br><span class="line">  isHot: boolean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤–éƒ¨èµ„æºwave_orange.svg</p>
<figure class="highlight plaintext"><figcaption><span>language-txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=&quot;100%&quot; height=&quot;100%&quot; id=&quot;svg&quot; viewBox=&quot;0 0 1440 490&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;transition duration-300 ease-in-out delay-150&quot;&gt;&lt;defs&gt;&lt;linearGradient id=&quot;gradient&quot; x1=&quot;0%&quot; y1=&quot;51%&quot; x2=&quot;100%&quot; y2=&quot;49%&quot;&gt;&lt;stop offset=&quot;5%&quot; stop-color=&quot;#fcb900&quot;&gt;&lt;/stop&gt;&lt;stop offset=&quot;95%&quot; stop-color=&quot;#ff6900&quot;&gt;&lt;/stop&gt;&lt;/linearGradient&gt;&lt;/defs&gt;&lt;path d=&quot;M 0,500 L 0,0 C 90.96650717703349,54.02870813397129 181.93301435406698,108.05741626794259 268,115 C 354.066985645933,121.94258373205741 435.23444976076553,81.79904306220095 535,84 C 634.7655502392345,86.20095693779905 753.129186602871,130.7464114832536 867,132 C 980.870813397129,133.2535885167464 1090.248803827751,91.2153110047847 1185,62 C 1279.751196172249,32.78468899521531 1359.8755980861245,16.392344497607656 1440,0 L 1440,500 L 0,500 Z&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;url(#gradient)&quot; fill-opacity=&quot;0.53&quot; class=&quot;transition-all duration-300 ease-in-out delay-150 path-0&quot;&gt;&lt;/path&gt;&lt;defs&gt;&lt;linearGradient id=&quot;gradient&quot; x1=&quot;0%&quot; y1=&quot;51%&quot; x2=&quot;100%&quot; y2=&quot;49%&quot;&gt;&lt;stop offset=&quot;5%&quot; stop-color=&quot;#fcb900&quot;&gt;&lt;/stop&gt;&lt;stop offset=&quot;95%&quot; stop-color=&quot;#ff6900&quot;&gt;&lt;/stop&gt;&lt;/linearGradient&gt;&lt;/defs&gt;&lt;path d=&quot;M 0,500 L 0,0 C 111.98086124401911,108.89952153110048 223.96172248803822,217.79904306220095 335,271 C 446.0382775119618,324.20095693779905 556.133971291866,321.7033492822967 626,309 C 695.866028708134,296.2966507177033 725.5023923444976,273.3875598086125 820,274 C 914.4976076555024,274.6124401913875 1073.8564593301435,298.7464114832536 1188,257 C 1302.1435406698565,215.25358851674642 1371.0717703349283,107.62679425837321 1440,0 L 1440,500 L 0,500 Z&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;url(#gradient)&quot; fill-opacity=&quot;1&quot; class=&quot;transition-all duration-300 ease-in-out delay-150 path-1&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶æºç </p>
<figure class="highlight plaintext"><figcaption><span>language-html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div</span><br><span class="line">    id=&quot;card&quot;</span><br><span class="line">    style=&quot;padding: 5px;margin: 20px&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-card</span><br><span class="line">      shadow=&quot;hover&quot;</span><br><span class="line">      style=&quot;width: 350px; border-radius: 10px&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div class=&quot;wave-orange-card&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div style=&quot;display: flex;flex-direction: column;justify-content: center;align-items: center;&quot;&gt;</span><br><span class="line">        &lt;el-image</span><br><span class="line">          :src=&quot;fileBaseUrl+courseBase.pic&quot;</span><br><span class="line">          fit=&quot;fill&quot;</span><br><span class="line">          style=&quot;width: 200px&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div style=&quot;height: 30px; font-size: 20px;margin-top: 10px&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;</span><br><span class="line">  &#123; courseBase.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div style=&quot;height: 40px; &quot;&gt;</span><br><span class="line">        &lt;el-rate</span><br><span class="line">          v-model=&quot;courseBase.star&quot;</span><br><span class="line">          size=&quot;large&quot;</span><br><span class="line">          show-score</span><br><span class="line">          text-color=&quot;#ff9900&quot;</span><br><span class="line">          :score-template=&quot;courseBase.star.toString() + &#x27;points&#x27;&quot;</span><br><span class="line">          disabled</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div style=&quot;height: 40px; &quot;&gt;</span><br><span class="line">        &lt;el-tag v-if=&quot;courseBase.charge&quot; type=&quot;warning&quot; size=&quot;large&quot; effect=&quot;light&quot;&gt;</span><br><span class="line">          &lt;span style=&quot;font-size: 20px;font-weight: bold&quot;&gt;ï¿¥&#123;</span><br><span class="line">  &#123; courseBase.price &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &amp;nbsp;&amp;nbsp;</span><br><span class="line">          &lt;span class=&quot;slash-deleted-text&quot; style=&quot;font-size: 14px;color: #909399&quot;&gt;&#123;</span><br><span class="line">  &#123; courseBase.originalPrice &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/el-tag&gt;</span><br><span class="line">        &lt;el-tag v-else type=&quot;success&quot; size=&quot;large&quot;&gt;&lt;span style=&quot;font-size: 20px&quot;&gt;å…è´¹&lt;/span&gt;&lt;/el-tag&gt;</span><br><span class="line">        &lt;span&gt;&amp;nbsp;&amp;nbsp; 6wäººæŠ¥å&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">     CourseBaseVO&#125; from &quot;@/api/course/types&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">     PropType&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const fileBaseUrl = import.meta.env.VITE_APP_MINIO_FILE_URL;</span><br><span class="line">interface CourseBaseExtraHotVo extends CourseBaseVO &#123;</span><br><span class="line">     </span><br><span class="line">  isHot: boolean;</span><br><span class="line">&#125;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">     </span><br><span class="line">  courseBase: Object as PropType&lt;CourseBaseExtraHotVo&gt;,</span><br><span class="line">&#125;);</span><br><span class="line">const emit = defineEmits([&#x27;update:courseBase&#x27;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">/* å¡ç‰‡å›¾ç‰‡èƒŒæ™¯ */</span><br><span class="line">:deep(.wave-orange-card)&#123;</span><br><span class="line">     </span><br><span class="line">  background-image: url(&quot;src/assets/svg/wave_orange.svg&quot;);</span><br><span class="line">  background-repeat: no-repeat;</span><br><span class="line">  background-size: cover; /* æˆ–ä½¿ç”¨ 100% 100% æ¥ç¡®ä¿å®Œå…¨è¦†ç›– */</span><br><span class="line">  background-position: center; /* æ ¹æ®éœ€è¦è°ƒæ•´ */</span><br><span class="line">  overflow: hidden; /* é¿å…å†…å®¹æº¢å‡º */</span><br><span class="line">  position: absolute; /* å›ºå®šå®šä½ï¼Œä¸éšæ»šåŠ¨æ¡ç§»åŠ¨ */</span><br><span class="line">  width: 310px; /* cardçš„å®½åº¦ä¸º350 */</span><br><span class="line">  height: 200px; /*picçš„å¤§å°ä¸º200*200*/</span><br><span class="line">  opacity: 0.6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* åˆ é™¤çº¿ */</span><br><span class="line">:deep(.slash-deleted-text) &#123;</span><br><span class="line">     </span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden; /* é˜²æ­¢æ–œçº¿æº¢å‡ºå®¹å™¨ */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:deep(.slash-deleted-text::after) &#123;</span><br><span class="line">     </span><br><span class="line">  content: &#x27;&#x27;;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 10%; /* è°ƒæ•´ä¸ºæ–‡æœ¬é«˜åº¦çš„ä¸€åŠ */</span><br><span class="line">  width: 100%; /* ä¸å®¹å™¨åŒå®½ */</span><br><span class="line">  border-bottom: 1px solid #F56C6C; /* åˆ é™¤çº¿çš„æ ·å¼ */</span><br><span class="line">  transform: rotate(25deg); /* è°ƒæ•´è§’åº¦ä¸ºå€¾æ–œ */</span><br><span class="line">  transform-origin: left bottom;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å¡ç‰‡èƒŒæ™¯ */</span><br><span class="line">:deep(:root) &#123;</span><br><span class="line">     </span><br><span class="line">  --margin: 100px;</span><br><span class="line">  /* ä¸Šæ¼”ä¸€å‡ºé»„é‡‘åˆ†å‰²ç‡çš„å¥½æˆ */</span><br><span class="line">  --card-width: 360px;</span><br><span class="line">  /* ä¸Šæ¼”ä¸€å‡ºé»„é‡‘åˆ†å‰²ç‡çš„å¥½æˆ */</span><br><span class="line">  --card-height: calc(var(--card-height) * 1.618);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#card&#123;</span><br><span class="line">     </span><br><span class="line">  width: var(--card-width);</span><br><span class="line">  height: var(--card-height);</span><br><span class="line">  position: relative;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: transform 0.4s ease; /* è®¾ç½®æ”¾å¤§åŠ¨ç”»çš„è¿‡æ¸¡æ•ˆæœä¸º2ç§’ */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å®šä¹‰è‡ªå®šä¹‰å±æ€§ --rotate */</span><br><span class="line">@property --rotate&#123;</span><br><span class="line">     </span><br><span class="line">  /* è‡ªå®šä¹‰å±æ€§çš„é»˜è®¤å€¼ */</span><br><span class="line">  initial-value: 90deg;</span><br><span class="line">  /*</span><br><span class="line">  å®šä¹‰è‡ªå®šä¹‰å±æ€§å…è®¸çš„è¯­æ³•ç»“æ„ï¼Œ</span><br><span class="line">  æ­¤å¤„å®šä¹‰è¯¥å…ƒç´ ä»…æ¥å—è§’åº¦å€¼ã€‚</span><br><span class="line">  */</span><br><span class="line">  syntax: &#x27;&lt;angle&gt;&#x27;;</span><br><span class="line">  /* å®šä¹‰è¯¥è‡ªå®šä¹‰å±æ€§æ˜¯å¦å…è®¸è¢«å…¶ä»–å…ƒç´ æ‰€ç»§æ‰¿ */</span><br><span class="line">  inherits: false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å®šä¹‰åŠ¨ç”» */</span><br><span class="line">@keyframes edge&#123;</span><br><span class="line">     </span><br><span class="line">  from&#123;</span><br><span class="line">     </span><br><span class="line">    --rotate: 0deg;</span><br><span class="line">  &#125;</span><br><span class="line">  to&#123;</span><br><span class="line">     </span><br><span class="line">    --rotate: 360deg;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#card::before&#123;</span><br><span class="line">     </span><br><span class="line">  content: &#x27;&#x27;;</span><br><span class="line">  width: 104%;</span><br><span class="line">  height: 102%;</span><br><span class="line">  background: linear-gradient(var(--rotate),</span><br><span class="line">  rgb(44, 251, 255), rgb(81, 154, 255), rgb(97, 57, 242));</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: -1;</span><br><span class="line">  top: -1%;</span><br><span class="line">  left: -2%;</span><br><span class="line">  /* è®¾ç½®è¾¹æ¡†åœ†è§’åŠå¾„ */</span><br><span class="line">  border-radius: 0.5vw;</span><br><span class="line">  /*</span><br><span class="line">  ä¸ºå½“å‰å…ƒç´ æŒ‡å®šä½¿ç”¨çš„åŠ¨ç”»ï¼Œå¹¶å°†è¯¥åŠ¨ç”»çš„</span><br><span class="line">  æŒç»­æ—¶é—´è®¾ç½®ä¸º 3.5sï¼ŒåŠ¨ç”»é€Ÿåº¦ä¿æŒä¸å˜ï¼Œ</span><br><span class="line">  åŠ¨ç”»æ’­æ”¾æ¬¡æ•°ä¸ºæ— é™æ¬¡ã€‚</span><br><span class="line">  */</span><br><span class="line">  animation: edge 10s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#card::after&#123;</span><br><span class="line">     </span><br><span class="line">  content: &#x27;&#x27;;</span><br><span class="line">  width: 80%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background: linear-gradient(var(--rotate),</span><br><span class="line">  rgb(44, 251, 255), rgb(81, 154, 255), rgb(97, 57, 242));</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 5%;</span><br><span class="line">  left: 10%;</span><br><span class="line">  filter: blur(2vw);</span><br><span class="line">  z-index: -1;</span><br><span class="line">  /* ä½¿ç”¨åŠ¨ç”» */</span><br><span class="line">  animation: edge 3.5s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å¡ç‰‡æ‚¬æµ®å˜åŒ–èƒŒæ™¯ */</span><br><span class="line">#card:hover &#123;</span><br><span class="line">     </span><br><span class="line">  transform: scale(1.02); /* é¼ æ ‡æ‚¬æµ®æ—¶æ”¾å¤§åˆ°1.1å€ */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#card::before, #card::after &#123;</span><br><span class="line">     </span><br><span class="line">  transition: background 1s ease; /* å°†è¿‡æ¸¡åº”ç”¨äºbackgroundï¼Œç¡®ä¿èƒŒæ™¯æ¸å˜çš„å¹³æ»‘å˜åŒ– */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#card:hover::before, #card:hover::after &#123;</span><br><span class="line">     </span><br><span class="line">  background: linear-gradient(var(--rotate), #f82747, #fc5c7c, #ffc3d3); /* æ¸å˜ä¸ºæ·¡çº¢è‰² */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ç¤ºä¾‹</p>
<figure class="highlight plaintext"><figcaption><span>language-html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;CourseCard</span><br><span class="line">	v-for=&quot;(course, index) in hotList&quot;</span><br><span class="line">	:course-base=&quot;course&quot;</span><br><span class="line">/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">	const hotList = ref&lt;CourseBaseExtraHotVo[]&gt;([]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-58/"><img class="fill" src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-58/1718889196842.png" alt="SpringBootå’ŒAxiosæ•°æ®çš„ä¼ é€’å’Œæ¥æ”¶-Restfulå®Œå…¨ç‰ˆ"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-17T11:39:58.000Z" title="4/17/2024, 11:39:58 AM">2024-04-17</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.382Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringBoot3/">SpringBoot3</a></span><span class="level-item">17 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2564ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-58/">SpringBootå’ŒAxiosæ•°æ®çš„ä¼ é€’å’Œæ¥æ”¶-Restfulå®Œå…¨ç‰ˆ</a></p><div class="content"><h1 id="ä¸€ã€åŸºç¡€çŸ¥è¯†é“ºå«"><a href="#ä¸€ã€åŸºç¡€çŸ¥è¯†é“ºå«" class="headerlink" title="ä¸€ã€åŸºç¡€çŸ¥è¯†é“ºå«"></a>ä¸€ã€åŸºç¡€çŸ¥è¯†é“ºå«</h1><h2 id="Axiosä½¿ç”¨"><a href="#Axiosä½¿ç”¨" class="headerlink" title="Axiosä½¿ç”¨"></a>Axiosä½¿ç”¨</h2><p>ä½¿ç”¨axioså‘é€è¯·æ±‚ï¼Œä¸€èˆ¬æœ‰ä¸‰ä¸ªæœ€å¸¸ç”¨çš„å±æ€§ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>url</code></td>
<td>è¯·æ±‚çš„ç«¯ç‚¹ <code>URL</code>ã€‚</td>
</tr>
<tr>
<td><code>method</code></td>
<td><code>HTTP</code> è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ <code>get</code>, <code>post</code>, <code>put</code>, <code>delete</code>, <code>patch</code> ç­‰ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>params</code> &#x2F; <code>data</code></td>
<td>å¦‚æœ <code>method</code> æ˜¯ <code>get</code> æˆ– <code>delete</code>ï¼Œä½¿ç”¨ <code>params</code> æ¥ä¼ é€’ <code>URL</code> æŸ¥è¯¢å‚æ•°ã€‚å¦‚æœæ˜¯ <code>post</code>, <code>put</code>, <code>patch</code>ï¼Œåˆ™ä½¿ç”¨ <code>data</code> ä¼ é€’è¯·æ±‚ä½“æ•°æ®ã€‚é€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ {}ã€‚</td>
</tr>
</tbody></table>
<h2 id="HTTPè¯·æ±‚æ–¹å¼"><a href="#HTTPè¯·æ±‚æ–¹å¼" class="headerlink" title="HTTPè¯·æ±‚æ–¹å¼"></a>HTTPè¯·æ±‚æ–¹å¼</h2><p><code>Restful</code>é£æ ¼å®šä¹‰äº†å¤šç§è¯·æ±‚æ–¹å¼ã€‚</p>
<table>
<thead>
<tr>
<th>æ–¹å¼</th>
<th>ç®€ä»‹</th>
<th>å¸¸ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>GET</code></td>
<td>è¯·æ±‚æŒ‡å®šçš„èµ„æºã€‚é€šå¸¸ç”¨æ¥è·å–æˆ–æŸ¥è¯¢èµ„æºã€‚</td>
<td>è¯»å–æˆ–æŸ¥è¯¢èµ„æºï¼Œå¦‚è·å–ç”¨æˆ·åˆ—è¡¨æˆ–ç‰¹å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td><code>POST</code></td>
<td>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼ˆå¦‚åˆ›å»ºæˆ–ä¿®æ”¹ï¼‰ã€‚æ•°æ®åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</td>
<td>åˆ›å»ºæ–°èµ„æºï¼ˆå¦‚æ–°ç”¨æˆ·ã€æ–°å¸–å­ï¼‰ï¼Œæˆ–æäº¤ç”¨æˆ·æ•°æ®è¡¨å•ã€‚</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td>ç”¨è¯·æ±‚ä½“ä¸­çš„æ•°æ®æ›¿æ¢ç›®æ ‡èµ„æºçš„æ‰€æœ‰å½“å‰è¡¨ç¤ºã€‚</td>
<td>æ›´æ–°ç°æœ‰èµ„æºçš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚ç¼–è¾‘ç”¨æˆ·çš„å®Œæ•´ä¸ªäººä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td><code>PATCH</code></td>
<td>å¯¹èµ„æºåº”ç”¨éƒ¨åˆ†ä¿®æ”¹ã€‚</td>
<td>æ›´æ–°èµ„æºçš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä¿®æ”¹ç”¨æˆ·çš„é‚®ç®±åœ°å€æˆ–å¯†ç ã€‚</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>åˆ é™¤æŒ‡å®šçš„èµ„æºã€‚</td>
<td>åˆ é™¤èµ„æºï¼Œå¦‚åˆ é™¤ç”¨æˆ·è´¦æˆ·æˆ–å¸–å­ã€‚</td>
</tr>
</tbody></table>
<h2 id="æ•°æ®ä¼ è¾“æ–¹å¼"><a href="#æ•°æ®ä¼ è¾“æ–¹å¼" class="headerlink" title="æ•°æ®ä¼ è¾“æ–¹å¼"></a>æ•°æ®ä¼ è¾“æ–¹å¼</h2><table>
<thead>
<tr>
<th>æ–¹å¼</th>
<th>ä»‹ç»</th>
</tr>
</thead>
<tbody><tr>
<td>URLè·¯å¾„å‚æ•°ï¼ˆ<code>Path Variables</code>ï¼‰</td>
<td>é€šè¿‡ <code>URL</code> çš„è·¯å¾„éƒ¨åˆ†ä¼ é€’æ•°æ®ã€‚åœ¨ <code>Spring Boot</code> ä¸­ä½¿ç”¨ <code>@PathVariable</code> æ³¨è§£è·å–ã€‚é€‚ç”¨äº <code>RESTful</code> é£æ ¼çš„ <code>API</code>ï¼Œä¾‹å¦‚è·å–ç‰¹å®šèµ„æºçš„è¯¦æƒ…ã€‚</td>
</tr>
<tr>
<td>æŸ¥è¯¢å‚æ•°ï¼ˆ<code>Query Parameters</code>ï¼‰</td>
<td>é€šè¿‡ <code>URL</code> çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆ?key&#x3D;value å½¢å¼ï¼‰ä¼ é€’æ•°æ®ã€‚åœ¨ <code>Spring Boot</code> ä¸­ä½¿ç”¨ <code>@RequestParam</code> æ³¨è§£è·å–ã€‚é€‚ç”¨äº <code>GET</code> å’Œ <code>DELETE</code> è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td>è¯·æ±‚ä½“ï¼ˆ<code>Request Body</code>ï¼‰</td>
<td>é€šè¿‡ <code>HTTP</code> è¯·æ±‚çš„ <code>body</code> éƒ¨åˆ†ä¼ é€’æ•°æ®ã€‚åœ¨ <code>Spring Boot</code> ä¸­ä½¿ç”¨ <code>@RequestBody</code> æ³¨è§£è·å–ã€‚é€‚ç”¨äº <code>POST</code> , <code>PUT</code> å’Œ <code>PATCH</code>è¯·æ±‚ï¼Œå‘é€å¤æ‚çš„æ•°æ®ç»“æ„ã€‚</td>
</tr>
</tbody></table>
<h2 id="SpringBootè·å–æ•°æ®çš„æ–¹å¼"><a href="#SpringBootè·å–æ•°æ®çš„æ–¹å¼" class="headerlink" title="SpringBootè·å–æ•°æ®çš„æ–¹å¼"></a>SpringBootè·å–æ•°æ®çš„æ–¹å¼</h2><p>éœ€è¦æåŠçš„æ˜¯ï¼Œå•å•ä»â€è·å–æ•°æ®â€çš„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ<code>Delete</code>å’Œ<code>Get</code>å½’ä¸ºä¸€ç±»ï¼ŒæŠŠ<code>Put</code>ã€<code>Patch</code>ã€<code>Post</code>å½’ä¸ºä¸€ç±»ã€‚</p>
<ul>
<li>å‰è€…åœ¨<code>axios</code>ä¸­ä½¿ç”¨<code>params</code>ä¼ é€’å‚æ•°ï¼Œå±äº<code>Query Parameters</code>ã€‚</li>
<li>åè€…åœ¨<code>axios</code>ä¸­ä½¿ç”¨<code>data</code>ä¼ é€’å‚æ•°ï¼Œå±äº<code>Request Body</code>ã€‚</li>
<li>æ— è®ºæ˜¯å“ªä¸€ç§ï¼Œéƒ½å¯ä»¥æœ‰<code>Path Variables</code>ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ Spring Bootï¼ˆåŠä¸€èˆ¬çš„ HTTP æœåŠ¡å¼€å‘ï¼‰ä¸­ï¼Œå°†è¯·æ±‚åˆ†ä¸ºâ€GET ä½“ç³»â€å’Œâ€POST ä½“ç³»â€å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ··æ·†ï¼Œå› ä¸ºæ¯ç§ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€PATCHã€DELETE ç­‰ï¼‰éƒ½è®¾è®¡æœ‰å…¶ç‹¬ç‰¹çš„ç”¨é€”å’Œè¯­ä¹‰ã€‚ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä»â€å¦‚ä½•è·å–è¯·æ±‚ä¸­çš„æ•°æ®â€è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œå¯ä»¥æœ‰ä¸€ç§æ¯”è¾ƒå®½æ³›çš„åˆ†ç±»æ–¹å¼ï¼Œå°¤å…¶æ˜¯å…³æ³¨äºæ•°æ®æ˜¯é€šè¿‡ URL è¿˜æ˜¯è¯·æ±‚ä½“ä¼ é€’ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>ä½“ç³»</th>
<th>è·å–æ•°æ®çš„å¸¸ç”¨æ³¨è§£</th>
</tr>
</thead>
<tbody><tr>
<td>Path Variables</td>
<td><code>@PathVariable</code></td>
</tr>
<tr>
<td>Getã€Deleteç±»</td>
<td><code>@RequestParam</code>ã€<code>@ModelAttribute</code></td>
</tr>
<tr>
<td>Postã€Putã€Patchç±»</td>
<td><code>@RequestBody</code></td>
</tr>
</tbody></table>
<h1 id="äºŒã€åŸºç¡€ä¼ é€’ä»£ç ç¤ºä¾‹"><a href="#äºŒã€åŸºç¡€ä¼ é€’ä»£ç ç¤ºä¾‹" class="headerlink" title="äºŒã€åŸºç¡€ä¼ é€’ä»£ç ç¤ºä¾‹"></a>äºŒã€åŸºç¡€ä¼ é€’ä»£ç ç¤ºä¾‹</h1><p>é™¤äº†ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œæ™®é€šçš„æ•°æ®ä¼ é€’ï¼Œé»˜è®¤ä»¥<code>axios.defaults.headers[&#39;Content-Type&#39;] = &#39;application/json;charset=utf-8&#39;;</code>ä¸ºç­–ç•¥ã€‚</p>
<h1 id="ï¼ˆä¸€ï¼‰Path-Variables"><a href="#ï¼ˆä¸€ï¼‰Path-Variables" class="headerlink" title="ï¼ˆä¸€ï¼‰Path Variables"></a>ï¼ˆä¸€ï¼‰Path Variables</h1><p><code>Path Variables</code>æ•°æ®åœ¨<code>url</code>ä¸Šï¼Œæ— å…³ä¹<code>get</code>è¿˜æ˜¯<code>post</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/test/users/123&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;</span><br><span class="line"> &#125;);</span><br><span class="line"> return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/test/users/345/info&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/test&quot;)</span><br><span class="line">public class CourseTestController &#123;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/users/&#123;userId&#125;&quot;)</span><br><span class="line">    public String getUser(@PathVariable String userId) &#123;</span><br><span class="line">   </span><br><span class="line">        return &quot;Received GET request for User ID: &quot; + userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PostMapping(&quot;/users/&#123;userId&#125;/info&quot;)</span><br><span class="line">    public String updateUser(@PathVariable String userId) &#123;</span><br><span class="line">   </span><br><span class="line">        return &quot;Received POST request for User ID: &quot; + userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ï¼ˆäºŒï¼‰Getã€Delete"><a href="#ï¼ˆäºŒï¼‰Getã€Delete" class="headerlink" title="ï¼ˆäºŒï¼‰Getã€Delete"></a>ï¼ˆäºŒï¼‰Getã€Delete</h1><h2 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h2><p><code>@RequestParam</code> ä¸»è¦ç”¨äºå°†<code>å•ä¸ªè¯·æ±‚å‚æ•°</code>ç»‘å®šåˆ°æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œé€šè¿‡æŒ‡å®š <code>value</code> æˆ– <code>name</code> å±æ€§ï¼Œä½ å¯ä»¥æ˜ç¡®å‘Šè¯‰ <code>Spring Boot</code> è¯·æ±‚å‚æ•°çš„å®é™…åç§°ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    params:&#123;</span><br><span class="line">   </span><br><span class="line">      type:&quot;1&quot;,</span><br><span class="line">      status:&quot;2&quot;,</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestParam String type, @RequestParam(name = &quot;status&quot;) String userStatus) &#123;</span><br><span class="line">  </span><br><span class="line">       return &quot;Received GET request for&quot; + type + &quot; &quot; + userStatus;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h2><p>åˆ©ç”¨ <code>@ModelAttribute</code> æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£ä¼šå‘Šè¯‰ <code>Spring Boot</code>ï¼Œåº”è¯¥å°†è¯·æ±‚ä¸­çš„æŸ¥è¯¢å‚æ•°è‡ªåŠ¨ç»‘å®šåˆ°æ–¹æ³•å‚æ•°å¯¹è±¡çš„å±æ€§ä¸Šã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    params:&#123;</span><br><span class="line">   </span><br><span class="line">      type:&quot;1&quot;,</span><br><span class="line">      status:&quot;2&quot;,</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@ModelAttribute Query query) &#123;</span><br><span class="line">  </span><br><span class="line">       return &quot;Received GET request for&quot; + query.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class Query&#123;</span><br><span class="line">  </span><br><span class="line">    String type;</span><br><span class="line">    String status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå°†æ‰€æœ‰çš„æŸ¥è¯¢å‚æ•°å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯åˆ†å¼€ä¸ºä¸¤ä¸ªå¯¹è±¡ï¼Œé™¤éè¿™<code>ä¸¤ä¸ªå¯¹è±¡åœ¨é€»è¾‘ä¸Šä»£è¡¨ç€å®Œå…¨ä¸åŒçš„ä¸œè¥¿</code>ï¼Œä¸”æ‚¨å¸Œæœ›æ˜¾å¼åœ°åŒºåˆ†å®ƒä»¬ã€‚å¦‚æœæ‚¨ç¡®å®æœ‰ç‰¹å®šçš„ç†ç”±éœ€è¦è¿™æ ·åšï¼Œä¹Ÿæ˜¯å¯è¡Œçš„ã€‚æ¯”å¦‚ç¬¬äºŒä¸ª<code>Query2</code>è¡¨ç¤º<code>åˆ†é¡µæŸ¥è¯¢æ—¶çš„åˆ†é¡µå‚æ•°</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;delete&#x27;,</span><br><span class="line">    params:&#123;</span><br><span class="line">   </span><br><span class="line">      type:&quot;1&quot;,</span><br><span class="line">      status:&quot;2&quot;,</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	@DeleteMapping(&quot;/users&quot;)</span><br><span class="line">    public String deleteUser(@ModelAttribute Query1 query1, @ModelAttribute Query2 query2) &#123;</span><br><span class="line">   </span><br><span class="line">        return &quot;Received GET request for&quot; + query1.toString() + query2.toString();</span><br><span class="line">    &#125;</span><br><span class="line">	@Data</span><br><span class="line">	class Query1&#123;</span><br><span class="line">   </span><br><span class="line">	    String type;</span><br><span class="line">	&#125;</span><br><span class="line">	@Data</span><br><span class="line">	class Query2&#123;</span><br><span class="line">   </span><br><span class="line">    String userStatus;</span><br><span class="line">    // å¦‚æœæ‚¨å¸Œæœ›æ•´ä¸ªå¯¹è±¡é€šè¿‡ @ModelAttribute æ¥ç»‘å®šï¼ŒåŒæ—¶åˆæœ‰ä¸ªåˆ«å±æ€§åä¸åŒ¹é…</span><br><span class="line">    // æ‚¨å¯ä»¥åœ¨åç«¯å¯¹è±¡ä¸­æ·»åŠ  setter æ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä¸­å¤„ç†åç§°ä¸åŒ¹é…çš„é—®é¢˜</span><br><span class="line">    // æ³¨æ„ï¼šLombok @Data æ³¨è§£ä¼šç”Ÿæˆé»˜è®¤çš„ setter æ–¹æ³•ï¼Œ</span><br><span class="line">    // æ‰€ä»¥å¦‚æœä½¿ç”¨ Lombokï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ setter æ–¹æ³•æ¥å¤„ç†ä¸åŒ¹é…çš„æƒ…å†µ</span><br><span class="line">    public void setStatus(String status) &#123;</span><br><span class="line">   </span><br><span class="line">        this.userStatus = status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ï¼ˆä¸‰ï¼‰Postã€Putã€Patch"><a href="#ï¼ˆä¸‰ï¼‰Postã€Putã€Patch" class="headerlink" title="ï¼ˆä¸‰ï¼‰Postã€Putã€Patch"></a>ï¼ˆä¸‰ï¼‰Postã€Putã€Patch</h1><h2 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h2><figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userName: &quot;John Doe&quot;,</span><br><span class="line">      userAge: 30,</span><br><span class="line">      userSex: &quot;Male&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   @PostMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestBody UserVo userVo) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    String userName;</span><br><span class="line">    Long userAge;</span><br><span class="line">    String userSex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ <code>Spring Boot</code> åç«¯çš„ <code>UserVo</code> ç±»ä¸­çš„å±æ€§åå’Œå‰ç«¯ä¼ é€’çš„ <code>JSON</code> å¯¹è±¡çš„é”®åä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>@JsonProperty</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;put&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userName: &quot;John Doe&quot;,</span><br><span class="line">      userAge: 32,</span><br><span class="line">      userSex: &quot;Male&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   @PutMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestBody UserVo userVo) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    @JsonProperty(&quot;userName&quot;)</span><br><span class="line">    String name;</span><br><span class="line">    Long userAge;</span><br><span class="line">    String userSex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;patch&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userAge: 34,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   @PatchMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestBody UserVo userVo) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    @JsonProperty(&quot;userName&quot;)</span><br><span class="line">    String name;</span><br><span class="line">    Long userAge;</span><br><span class="line">    String userSex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä¸æƒ³é¢å¤–å†™ä¸€ä¸ªç±»ä½œä¸º<code>@RequestBody</code>çš„å‚æ•°ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨<code>Map</code>æˆ–è€…<code>JsonNode</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PutMapping(&quot;/users&quot;)</span><br><span class="line">public R&lt;Boolean&gt; getUser(@RequestBody Map&lt;String, Object&gt; body) &#123;</span><br><span class="line">   </span><br><span class="line">    Long id = Long.valueOf(body.get(&quot;userId&quot;).toString());</span><br><span class="line">    String mind = (String) body.get(&quot;name&quot;);</span><br><span class="line">    // ä¸šåŠ¡é€»è¾‘</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PutMapping(&quot;/users&quot;)</span><br><span class="line">public R&lt;Boolean&gt; getUser(@RequestBody JsonNode body) &#123;</span><br><span class="line">   </span><br><span class="line">    Long id = body.get(&quot;userId&quot;).asLong();</span><br><span class="line">    String mind = body.get(&quot;name&quot;).asText();</span><br><span class="line">    // ä¸šåŠ¡é€»è¾‘</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¼ é€’"><a href="#ä¸‰ã€ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¼ é€’" class="headerlink" title="ä¸‰ã€ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¼ é€’"></a>ä¸‰ã€ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¼ é€’</h1><h1 id="ï¼ˆä¸€ï¼‰æ•°ç»„"><a href="#ï¼ˆä¸€ï¼‰æ•°ç»„" class="headerlink" title="ï¼ˆä¸€ï¼‰æ•°ç»„"></a>ï¼ˆä¸€ï¼‰æ•°ç»„</h1><p>å¦‚æœç”¨çš„æ˜¯<code>Post</code>ï¼Œé‚£ä¹ˆä¸€èˆ¬ä¸€åˆ‡å®‰å¥½ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userOrder: [&#x27;1223&#x27;, &#x27;3445&#x27;, &#x27;556&#x27;],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   @PostMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestBody UserVo userVo) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    List&lt;String&gt; userOrder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç”¨çš„æ˜¯<code>Get</code>ï¼Œå°±éœ€è¦æ³¨æ„é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Boot æœŸæœ›åˆ—è¡¨æˆ–æ•°ç»„ç±»å‹çš„æŸ¥è¯¢å‚æ•°ä»¥ç‰¹å®šçš„æ ¼å¼ä¼ é€’ï¼Œä¾‹å¦‚ï¼š<code>userOrder=1223&amp;userOrder=3445&amp;userOrder=556</code>ã€‚ä½†åœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œç”±äºæ˜¯é€šè¿‡ axios å‘é€è¯·æ±‚ï¼Œå¹¶ä¸”å½“ä½ åœ¨è¯·æ±‚çš„ params ä¸­åŒ…å«ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œaxios ä¼šå°†æ•°ç»„è½¬æ¢ä¸º <code>userOrder[0]=1223&amp;userOrder[1]=3445&amp;userOrder[2]=556</code> çš„æ ¼å¼ï¼Œè¿™ä¸ Spring Boot çš„é»˜è®¤<code>æœŸæœ›ä¸åŒ¹é…</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    params:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userOrder: [&#x27;1223&#x27;, &#x27;3445&#x27;, &#x27;556&#x27;].join(&#x27;,&#x27;),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestParam String userId, @RequestParam List&lt;String&gt; userOrder) &#123;</span><br><span class="line">  </span><br><span class="line">       return userId + &quot;\n&quot; + userOrder.toString();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæ•°ç»„å…ƒç´ æ˜¯ç®€å•ç±»å‹ï¼Œç›´æ¥ç”¨å­—ç¬¦â€™,â€™æ‹¼æ¥å³å¯ï¼Œå˜æˆ<code>userOrder=1223,3445,556</code>ï¼ŒSpringbootä¹Ÿèƒ½åŒ¹é…ã€‚æˆ–è€…å¯ä»¥å»å‚è€ƒ<code>qs.stringify</code>ä¹Ÿå°±æ˜¯<code>qs</code>åº“çš„ç”¨æ³•ã€‚</p>
<p>å¦‚æœæ•°ç»„å…ƒç´ æ¯”è¾ƒå¤æ‚å‘¢ï¼Ÿå¦‚æœä½ ä»ç„¶åšæŒä½¿ç”¨<code>get</code>ï¼Œå»ºè®®å»é˜…è¯»<code>qs</code>ä½¿ç”¨ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯ç”¨<code>post</code>ï¼Œå¯ä»¥çœå»å¾ˆå¤šéº»çƒ¦ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/users&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userOrder: [</span><br><span class="line">        &#123;</span><br><span class="line">    id: &#x27;1223&#x27;, name: &#x27;Order1&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">    id: &#x27;3445&#x27;, name: &#x27;Order2&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">    id: &#x27;556&#x27;, name: &#x27;Order3&#x27; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   @PostMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(@RequestBody UserVo userVo) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    List&lt;Item&gt; userOrder;</span><br><span class="line">&#125;</span><br><span class="line">@Data</span><br><span class="line">class Item&#123;</span><br><span class="line">  </span><br><span class="line">    String id;</span><br><span class="line">    String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ï¼ˆäºŒï¼‰GET-POSTå¤åˆå‹"><a href="#ï¼ˆäºŒï¼‰GET-POSTå¤åˆå‹" class="headerlink" title="ï¼ˆäºŒï¼‰GET&#x2F;POSTå¤åˆå‹"></a>ï¼ˆäºŒï¼‰GET&#x2F;POSTå¤åˆå‹</h1><p>å¯¹äºå¤åˆå‹è¯·æ±‚ï¼Œå³åœ¨<code>URL</code>ä¸­é€šè¿‡æŸ¥è¯¢å‚æ•°ï¼ˆä¾‹å¦‚åˆ†é¡µä¿¡æ¯ï¼‰ä¼ é€’éƒ¨åˆ†æ•°æ®ï¼ŒåŒæ—¶åœ¨è¯·æ±‚ä½“ä¸­é€šè¿‡<code>JSON</code>ä¼ é€’æ›´å¤æ‚çš„æ•°æ®ï¼ˆä¾‹å¦‚ç­›é€‰æ¡ä»¶ï¼‰ï¼Œ<code>Spring Boot</code>å¯ä»¥é€šè¿‡åŒæ—¶ä½¿ç”¨<code>@RequestParam</code>å’Œ<code>@RequestBody</code>æ³¨è§£æ¥æ¥æ”¶è¿™ä¸¤ç§ç±»å‹çš„æ•°æ®ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const pageParams = &#123;</span><br><span class="line">   </span><br><span class="line">  page: 1,</span><br><span class="line">  size: 10</span><br><span class="line">&#125;;</span><br><span class="line">return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: `/users?page=$&#123;</span><br><span class="line">     pageParams.page&#125;&amp;size=$&#123;</span><br><span class="line">     pageParams.size&#125;`,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data:&#123;</span><br><span class="line">   </span><br><span class="line">      userId: 123,</span><br><span class="line">      userName: &quot;Jack&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   @PostMapping(&quot;/users&quot;)</span><br><span class="line">   public String getUser(</span><br><span class="line">       @RequestBody UserVo userVo,</span><br><span class="line">       @RequestParam(&quot;page&quot;) int page,</span><br><span class="line">       @RequestParam(&quot;size&quot;) int size</span><br><span class="line">   ) &#123;</span><br><span class="line">  </span><br><span class="line">       return userVo.toString();</span><br><span class="line">   &#125;</span><br><span class="line">@Data</span><br><span class="line">class UserVo&#123;</span><br><span class="line">  </span><br><span class="line">    Long userId;</span><br><span class="line">    String userName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€ç‰¹æ®Šæ•°æ®"><a href="#å››ã€ç‰¹æ®Šæ•°æ®" class="headerlink" title="å››ã€ç‰¹æ®Šæ•°æ®"></a>å››ã€ç‰¹æ®Šæ•°æ®</h1><h1 id="ï¼ˆä¸€ï¼‰æ–‡ä»¶"><a href="#ï¼ˆä¸€ï¼‰æ–‡ä»¶" class="headerlink" title="ï¼ˆä¸€ï¼‰æ–‡ä»¶"></a>ï¼ˆä¸€ï¼‰æ–‡ä»¶</h1><p>ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨çš„ <code>Content-Type</code> é€šå¸¸æ˜¯ <code>multipart/form-data</code>ã€‚è¿™ç§ç±»å‹å…è®¸å°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ä½œä¸ºä¸€ç³»åˆ—éƒ¨åˆ†ï¼ˆpartsï¼‰å‘é€ï¼Œæ¯ä¸ªéƒ¨åˆ†å¯ä»¥åŒ…å«æ–‡ä»¶å†…å®¹æˆ–å…¶ä»–æ•°æ®ã€‚è¿™ç§æ–¹å¼éå¸¸é€‚åˆæ–‡ä»¶ä¸Šä¼ ï¼Œå› ä¸ºå®ƒæ”¯æŒåœ¨å•ä¸ªè¯·æ±‚ä¸­å‘é€<code>æ–‡ä»¶æ•°æ®åŠå…¶ä»–è¡¨å•å­—æ®µ</code>ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const formData = new FormData();</span><br><span class="line">formData.append(&#x27;file&#x27;, file);</span><br><span class="line">formData.append(&#x27;filename&#x27;, file.name);</span><br><span class="line">formData.append(&#x27;chunkIndex&#x27;, i.toString());</span><br><span class="line">formData.append(&#x27;totalChunks&#x27;, totalChunks.toString());</span><br><span class="line">formData.append(&#x27;md5&#x27;, md5);</span><br><span class="line">const rsp = await addChunk(formData);</span><br><span class="line"></span><br><span class="line">export const addChunk = (data: any) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">  return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/video/chunk&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data: data</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(value = &quot;/video/chunk&quot;)</span><br><span class="line">   public R&lt;String&gt; handleChunkUpload(</span><br><span class="line">       @RequestParam(&quot;file&quot;) MultipartFile file,</span><br><span class="line">       @RequestParam(&quot;md5&quot;) String md5,</span><br><span class="line">       @RequestParam(&quot;filename&quot;) String filename,</span><br><span class="line">       @RequestParam(&quot;chunkIndex&quot;) int chunkIndex,</span><br><span class="line">       @RequestParam(&quot;totalChunks&quot;) int totalChunks) &#123;</span><br><span class="line">  </span><br><span class="line">       if (ObjectUtil.isNull(file)) &#123;</span><br><span class="line">  </span><br><span class="line">           return R.fail(&quot;ä¸Šä¼ æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       Boolean b = mediaFilesService.handleChunkUpload(file, md5);</span><br><span class="line">       if (b)&#123;</span><br><span class="line">  </span><br><span class="line">           return R.ok();</span><br><span class="line">       &#125;else &#123;</span><br><span class="line">  </span><br><span class="line">           return R.fail();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>Vue 3</code> çš„æ¡†æ¶ <code>Element Plus</code>ä¸­ï¼Œ<code>el-upload</code> ç»„ä»¶ç”¨äºæ–‡ä»¶ä¸Šä¼ ï¼Œå®ƒåº•å±‚ä½¿ç”¨çš„ä¹Ÿæ˜¯ <code>multipart/form-data</code> è¿™ç§ Content-Type æ¥ä¸Šä¼ æ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸º <code>multipart/form-data</code> å…è®¸åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å‘é€å¤šéƒ¨åˆ†æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬å­—æ®µå’Œæ–‡ä»¶ï¼Œéå¸¸é€‚åˆæ–‡ä»¶ä¸Šä¼ çš„åœºæ™¯</p>
<figure class="highlight plaintext"><figcaption><span>language-html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload</span><br><span class="line">    action=&quot;http://example.com/upload&quot;</span><br><span class="line">    :data=&quot;extraData&quot;</span><br><span class="line">    :on-success=&quot;handleSuccess&quot;</span><br><span class="line">    :on-error=&quot;handleError&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;ç‚¹å‡»ä¸Šä¼ &lt;/el-button&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123;</span><br><span class="line">      ElMessage &#125; from &#x27;element-plus&#x27;;</span><br><span class="line">import &#123;</span><br><span class="line">      ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">// é¢å¤–æ•°æ®</span><br><span class="line">const extraData = ref(&#123;</span><br><span class="line">     </span><br><span class="line">  userId: &quot;123&quot;,</span><br><span class="line">  description: &quot;è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const handleSuccess = (response, file, fileList) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">  // æ–‡ä»¶ä¸Šä¼ æˆåŠŸçš„å›è°ƒ</span><br><span class="line">  ElMessage.success(&#x27;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const handleError = (err, file, fileList) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">  // æ–‡ä»¶ä¸Šä¼ å¤±è´¥çš„å›è°ƒ</span><br><span class="line">  ElMessage.error(&#x27;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class FileUploadController &#123;</span><br><span class="line">   </span><br><span class="line">    @PostMapping(&quot;/upload&quot;)</span><br><span class="line">    public String handleFileUpload(</span><br><span class="line">            @RequestParam(&quot;file&quot;) MultipartFile file,</span><br><span class="line">            @RequestParam(&quot;userId&quot;) String userId,</span><br><span class="line">            @RequestParam(&quot;description&quot;) String description) &#123;</span><br><span class="line">   </span><br><span class="line">        return &quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œç”¨æˆ·ID: &quot; + userId + &quot;ï¼Œæè¿°: &quot; + description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ï¼ˆäºŒï¼‰Cookies"><a href="#ï¼ˆäºŒï¼‰Cookies" class="headerlink" title="ï¼ˆäºŒï¼‰Cookies"></a>ï¼ˆäºŒï¼‰Cookies</h1><p>s<br>aultValue&#96;æŒ‡å®šçš„é»˜è®¤å€¼ â€œâ€ä¼šè¢«ä½¿ç”¨ã€‚</p>
<img src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-58/1718889196842.png" class="" title="This is an example image">

</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/"><img class="fill" src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/1718889268036.png" alt="è§†é¢‘åˆ†å—ä¸Šä¼ Vue3+SpringBoot3+Minio"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-17T11:39:47.000Z" title="4/17/2024, 11:39:47 AM">2024-04-17</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.370Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringBoot3/">SpringBoot3</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringCloud/">SpringCloud</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringCloud/Minio/">Minio</a></span><span class="level-item">13 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1905ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/">è§†é¢‘åˆ†å—ä¸Šä¼ Vue3+SpringBoot3+Minio</a></p><div class="content"><h1 id="ä¸€ã€ç®€åŒ–æ¼”ç¤º"><a href="#ä¸€ã€ç®€åŒ–æ¼”ç¤º" class="headerlink" title="ä¸€ã€ç®€åŒ–æ¼”ç¤º"></a>ä¸€ã€ç®€åŒ–æ¼”ç¤º</h1><h2 id="åˆ†å—ä¸Šä¼ ã€åˆå¹¶åˆ†å—"><a href="#åˆ†å—ä¸Šä¼ ã€åˆå¹¶åˆ†å—" class="headerlink" title="åˆ†å—ä¸Šä¼ ã€åˆå¹¶åˆ†å—"></a>åˆ†å—ä¸Šä¼ ã€åˆå¹¶åˆ†å—</h2><p>å‰ç«¯å°†å®Œæ•´çš„è§†é¢‘æ–‡ä»¶åˆ†å‰²æˆå¤šä»½æ–‡ä»¶å—ï¼Œä¾æ¬¡ä¸Šä¼ åˆ°åç«¯ï¼Œåç«¯å°†å…¶ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚å‰ç«¯å°†æ–‡ä»¶å—ä¸Šä¼ å®Œæ¯•åï¼Œå‘é€åˆå¹¶è¯·æ±‚ï¼Œåç«¯æ‹¿å–æ–‡ä»¶å—ï¼Œåˆå¹¶åé‡æ–°ä¸Šä¼ åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚  </p>
<img src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/1718889267389.png" class="" title="This is an example image">

<h2 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h2><p>å‰ç«¯éå†æ–‡ä»¶å—ï¼Œæ¯æ¬¡ä¸Šä¼ ä¹‹å‰ï¼Œå…ˆè¯¢é—®æ–‡ä»¶å—æ˜¯å¦å­˜åœ¨ï¼Œåªæœ‰ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šä¸Šä¼ ã€‚  </p>
<img src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/1718889267759.png" class="" title="This is an example image">

<h2 id="ç§’ä¼ "><a href="#ç§’ä¼ " class="headerlink" title="ç§’ä¼ "></a>ç§’ä¼ </h2><p>å‰ç«¯åˆ†å‰²è§†é¢‘æ–‡ä»¶å‰ï¼Œå…ˆè¯¢é—®æ­¤è§†é¢‘æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä¸å†ä¸Šä¼ ï¼Œåç«¯ä¹‹é—´è¿”å›è§†é¢‘ä¿¡æ¯ã€‚å‰ç«¯çœ‹èµ·æ¥å°±åƒæ˜¯è¢«ç§’ä¼ äº†ã€‚  </p>
<img src="/Hexo/2024/04/17/2024-H1/2024-04-17-11-39-47/1718889268036.png" class="" title="This is an example image">

<h1 id="äºŒã€æ›´è¯¦ç»†çš„é€»è¾‘å’Œç»†èŠ‚é—®é¢˜"><a href="#äºŒã€æ›´è¯¦ç»†çš„é€»è¾‘å’Œç»†èŠ‚é—®é¢˜" class="headerlink" title="äºŒã€æ›´è¯¦ç»†çš„é€»è¾‘å’Œç»†èŠ‚é—®é¢˜"></a>äºŒã€æ›´è¯¦ç»†çš„é€»è¾‘å’Œç»†èŠ‚é—®é¢˜</h1><ul>
<li>è§†é¢‘æ–‡ä»¶å’Œæ–‡ä»¶å—éƒ½é€šè¿‡æ–‡ä»¶æœ¬èº«è®¡ç®—<code>MD5å€¼</code>ä½œä¸ºå”¯ä¸€æ ‡å¿—</li>
<li>æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨<code>Minio</code>ï¼Œåªè¦æä¾›<code>buckerName</code>å’Œ<code>path</code>å°±å¯ä»¥æ“ä½œæ–‡ä»¶</li>
<li>åç«¯åˆå¹¶æ–‡ä»¶å—æˆåŠŸåä¼šåˆ é™¤æ–‡ä»¶å—ï¼Œå¹¶ä»¥<code>MD5</code>å€¼ä¸º<code>id</code>å­˜å…¥æ•°æ®åº“</li>
<li><code>Minio</code>å­˜å‚¨æ–‡ä»¶å—æ—¶ï¼Œä¾æ®å…¶<code>md5</code>å€¼è®¡ç®—<code>path</code>ï¼Œæ¯”å¦‚å–å‰ä¸¤ä¸ªå­—ç¬¦æ„å»ºäºŒçº§æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶åä¸º<code>md5</code>å€¼ï¼Œæ— åç¼€ã€‚æ‰€ä»¥åªéœ€è¦æä¾›æ–‡ä»¶å—çš„<code>md5</code>å€¼å°±å¯ä»¥æ“ä½œæ–‡ä»¶å—ã€‚</li>
<li><code>Minio</code>å­˜å‚¨å®Œæ•´è§†é¢‘æ–‡ä»¶æ—¶ï¼Œä¾æ®å…¶<code>md5</code>å€¼è®¡ç®—<code>path</code>ï¼ŒåŒä¸Šï¼Œæ–‡ä»¶åä¸º<code>md5</code>å€¼ï¼Œæºå¸¦.<code>mp4</code>ç­‰åç¼€ï¼Œæ‰€ä»¥åªéœ€è¦æä¾›è§†é¢‘æ–‡ä»¶çš„<code>md5</code>å€¼å°±å¯ä»¥æ“ä½œè§†é¢‘æ–‡ä»¶ã€‚</li>
</ul>
<ol>
<li>é¦–å…ˆï¼Œå‰ç«¯è®¡ç®—è§†é¢‘æ–‡ä»¶çš„<code>MD5</code>å€¼ï¼Œè®°ä¸º<code>fileMd5</code>ï¼Œä¼ é€’MD5å€¼æ¥è¯¢é—®åç«¯æ­¤è§†é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œåç«¯æŸ¥è¯¢æ•°æ®åº“è¿”å›ç»“æœï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™å‰ç«¯è§¦å‘â€ç§’ä¼ â€ã€‚</li>
<li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†è§†é¢‘æ–‡ä»¶åˆ†å‰²æˆæ–‡ä»¶å—ï¼Œå¾ªç¯ä¸Šä¼ ï¼Œæ¯æ¬¡å¾ªç¯ï¼Œé¦–å…ˆè®¡ç®—æ–‡ä»¶å—çš„<code>md5</code>å€¼ï¼Œä¼ é€’md5å€¼è¯¢é—®åç«¯æ­¤æ–‡ä»¶å—æ˜¯å¦å­˜åœ¨ï¼Œåç«¯æ ¹æ®<code>md5</code>åˆ¤æ–­æ–‡ä»¶å—æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå‰ç«¯è·³è¿‡æ­¤æ–‡ä»¶å—ä¸Šä¼ ï¼Œç›´æ¥æ ‡è®°ä¸ºä¸Šä¼ æˆåŠŸï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸Šä¼ è‡³åç«¯ï¼Œåç«¯å°†å…¶ä¿å­˜åˆ°<code>minio</code>ã€‚è¿™å…¶å®å°±æ˜¯â€åˆ†å—ä¸Šä¼ ï¼Œæ–­ç‚¹ç»­ä¼ â€ã€‚</li>
<li>æœ€åæ‰€æœ‰åˆ†å—æ–‡ä»¶éƒ½ä¸Šä¼ æˆåŠŸï¼Œå‰ç«¯å‘èµ·åˆå¹¶è¯·æ±‚ï¼Œä¼ é€’è§†é¢‘æ–‡ä»¶çš„<code>md5</code>å€¼å’Œæ‰€æœ‰æ–‡ä»¶å—çš„<code>md5</code>å€¼åˆ°åç«¯ï¼Œåç«¯è¿›è¡Œæ–‡ä»¶å—åˆå¹¶ã€æ–‡ä»¶å—çš„åˆ é™¤ã€åˆå¹¶æ–‡ä»¶çš„ä¸Šä¼ ï¼Œå°†ä¿¡æ¯å­˜å‚¨åœ¨<code>mysql</code>æ•°æ®åº“ï¼Œå°†æ‰§è¡Œç»“æœå‘ŠçŸ¥å‰ç«¯ã€‚è¿™å°±æ˜¯â€åˆå¹¶åˆ†å—â€</li>
</ol>
<h2 id="å¯èƒ½å­˜åœ¨çš„éšæ‚£"><a href="#å¯èƒ½å­˜åœ¨çš„éšæ‚£" class="headerlink" title="å¯èƒ½å­˜åœ¨çš„éšæ‚£"></a>å¯èƒ½å­˜åœ¨çš„éšæ‚£</h2><blockquote>
<p>ä¸€ä¸ªè§†é¢‘æ–‡ä»¶çš„æ–‡ä»¶å—æ²¡æœ‰å…¨éƒ¨ä¸Šä¼ å®Œæˆå°±ç»ˆæ­¢ï¼Œæ­¤æ—¶æ–‡ä»¶å—å°†ä¸€ç›´ä¿å­˜åœ¨<code>minio</code>ä¸­ï¼Œå¦‚æœä¹‹åæ­¤è§†é¢‘å†ä¹Ÿæ²¡æœ‰å‘èµ·è¿‡ä¸Šä¼ è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™äº›æ–‡ä»¶å—éƒ½æ˜¯æ˜¯ä¸€ç§åƒåœ¾ã€‚</p>
</blockquote>
<p>å¯ä»¥å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œéå†<code>Minio</code>æ²¡æœ‰åç¼€çš„æ–‡ä»¶å—ï¼Œåˆ¤æ–­å…¶åˆ›å»ºæ—¶é—´è·ç¦»å½“å‰æ˜¯å¦è¶³å¤Ÿä¹…ï¼Œæ˜¯åˆ™åˆ é™¤ã€‚</p>
<h1 id="ä¸‰ã€ä»£ç ç¤ºä¾‹"><a href="#ä¸‰ã€ä»£ç ç¤ºä¾‹" class="headerlink" title="ä¸‰ã€ä»£ç ç¤ºä¾‹"></a>ä¸‰ã€ä»£ç ç¤ºä¾‹</h1><h2 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h2><figure class="highlight plaintext"><figcaption><span>language-html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;p-2&quot;&gt;</span><br><span class="line">		&lt;el-button icon=&quot;Plus&quot; plain type=&quot;primary&quot; @click=&quot;handleAdd&quot;&gt;æ–°å¢&lt;/el-button&gt;</span><br><span class="line">		&lt;!-- æ·»åŠ æˆ–ä¿®æ”¹mediaå¯¹è¯æ¡† --&gt;</span><br><span class="line">		&lt;el-dialog v-model=&quot;dialog.visible&quot; :title=&quot;dialog.title&quot; append-to-body width=&quot;500px&quot;&gt;</span><br><span class="line">			&lt;el-form ref=&quot;mediaFormRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot;&gt;</span><br><span class="line">				&lt;el-form-item label=&quot;ä¸Šä¼ è§†é¢‘&quot; prop=&quot;originalName&quot; v-show=&quot;dialog.title==&#x27;æ·»åŠ è§†é¢‘&#x27;&quot;&gt;</span><br><span class="line">					&lt;el-upload</span><br><span class="line">						ref=&quot;uploadRef&quot;</span><br><span class="line">						:http-request=&quot;onUpload&quot;</span><br><span class="line">						:before-upload=&quot;beforeUpload&quot;</span><br><span class="line">						:limit=&quot;1&quot;</span><br><span class="line">						action=&quot;#&quot;</span><br><span class="line">						class=&quot;upload-demo&quot;</span><br><span class="line">					&gt;</span><br><span class="line">						&lt;template #trigger&gt;</span><br><span class="line">							&lt;el-button type=&quot;primary&quot;&gt;é€‰æ‹©è§†é¢‘&lt;/el-button&gt;</span><br><span class="line">						&lt;/template&gt;</span><br><span class="line">						&lt;template #tip&gt;</span><br><span class="line">							&lt;div class=&quot;el-upload__tip&quot;&gt;</span><br><span class="line">								æ”¯æŒåˆ†å—ä¸Šä¼ ã€ç«¯ç‚¹ç»­ä¼ </span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						&lt;/template&gt;</span><br><span class="line">					&lt;/el-upload&gt;</span><br><span class="line">				&lt;/el-form-item&gt;</span><br><span class="line">				&lt;el-form-item v-show=&quot;percentageShow&quot;&gt;</span><br><span class="line">					&lt;el-progress :percentage=&quot;percentage&quot; style=&quot;width: 100%&quot;/&gt;</span><br><span class="line">				&lt;/el-form-item&gt;</span><br><span class="line">			&lt;/el-form&gt;</span><br><span class="line">		&lt;/el-dialog&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; name=&quot;Media&quot; setup&gt;</span><br><span class="line">import type &#123;</span><br><span class="line">     UploadInstance, UploadRawFile, UploadRequestOptions, UploadUserFile&#125; from &#x27;element-plus&#x27;</span><br><span class="line">import SparkMD5 from &quot;spark-md5&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">     HttpStatus&#125; from &quot;@/enums/RespEnum&quot;;</span><br><span class="line"></span><br><span class="line">const dialog = reactive&lt;DialogOption&gt;(&#123;</span><br><span class="line">     </span><br><span class="line">	visible: false,</span><br><span class="line">	title: &#x27;&#x27;</span><br><span class="line">&#125;);</span><br><span class="line">//ä¸Šä¼ è§†é¢‘</span><br><span class="line">const baseUrl = import.meta.env.VITE_APP_BASE_API;</span><br><span class="line">const uploadImgUrl = ref(baseUrl + &quot;/media/media/image&quot;); // ä¸Šä¼ çš„å›¾ç‰‡æœåŠ¡å™¨åœ°å€</span><br><span class="line">const uploadRef = ref&lt;UploadInstance&gt;()</span><br><span class="line">const needUpload = ref(true)</span><br><span class="line">const chunkSize = 5*1024*1024;</span><br><span class="line"></span><br><span class="line">const percentage = ref(0)</span><br><span class="line">const percentageShow = ref(false)</span><br><span class="line"></span><br><span class="line">/** æ–°å¢æŒ‰é’®æ“ä½œ */</span><br><span class="line">const handleAdd = () =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">	dialog.visible = true;</span><br><span class="line">	dialog.title = &quot;æ·»åŠ è§†é¢‘&quot;;</span><br><span class="line">	percentageShow.value = false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è·å–æ–‡ä»¶çš„MD5</span><br><span class="line">const getFileMd5 = (file:any) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">	return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">			let fileReader = new FileReader()</span><br><span class="line">			fileReader.onload = function (event) &#123;</span><br><span class="line">     </span><br><span class="line">				let fileMd5 = SparkMD5.ArrayBuffer.hash(event.target.result)</span><br><span class="line">				resolve(fileMd5)</span><br><span class="line">			&#125;</span><br><span class="line">			fileReader.readAsArrayBuffer(file)</span><br><span class="line">		&#125;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åœ¨ä¸Šä¼ ä¹‹å‰ï¼Œä½¿ç”¨è§†é¢‘md5åˆ¤æ–­è§†é¢‘æ˜¯å¦å·²ç»å­˜åœ¨</span><br><span class="line">const beforeUpload = async (rawFile: UploadRawFile) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">  needUpload.value = true;</span><br><span class="line">  const fileMd5 = await getFileMd5(rawFile);</span><br><span class="line">  form.value.id = fileMd5;</span><br><span class="line">  const rsp = await getMedia(fileMd5);</span><br><span class="line">  if(!!rsp.data &amp;&amp; rsp.data[&#x27;id&#x27;] == fileMd5)&#123;</span><br><span class="line">     </span><br><span class="line">    needUpload.value = false;</span><br><span class="line">    proxy?.$modal.msgWarning(&quot;è§†é¢‘æ–‡ä»¶å·²å­˜åœ¨ï¼Œè¯·å‹¿é‡å¤ä¸Šä¼ ã€‚æ–‡ä»¶åä¸º&quot;+rsp.data[&#x27;originalName&#x27;])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ†å—ä¸Šä¼ ã€åˆå¹¶åˆ†å—</span><br><span class="line">const onUpload = async (options: UploadRequestOptions) =&gt; &#123;</span><br><span class="line">     </span><br><span class="line">  if(!needUpload.value)&#123;</span><br><span class="line">     </span><br><span class="line">    //ç§’ä¼ </span><br><span class="line">    percentageShow.value = true;</span><br><span class="line">    percentage.value = 100;</span><br><span class="line">    dialog.visible = false;</span><br><span class="line">	return;</span><br><span class="line">  &#125;</span><br><span class="line">  percentageShow.value = true;</span><br><span class="line">  const file = options.file</span><br><span class="line">  const totalChunks = Math.ceil(file.size / chunkSize);</span><br><span class="line">  let isUploadSuccess = true;//è®°å½•åˆ†å—æ–‡ä»¶æ˜¯å¦ä¸Šä¼ æˆåŠŸ</span><br><span class="line">  //åˆå¹¶æ–‡ä»¶å‚æ•°</span><br><span class="line">  let mergeVo = &#123;</span><br><span class="line">     </span><br><span class="line">    &quot;chunksMd5&quot;: [] as string[],</span><br><span class="line">    &quot;videoMd5&quot;: undefined as string | undefined,</span><br><span class="line">    &quot;videoName&quot;: file.name,</span><br><span class="line">    &quot;videoSize&quot;: file.size,</span><br><span class="line">    &quot;remark&quot;: undefined as string | undefined</span><br><span class="line">  &#125;</span><br><span class="line">    //å¾ªç¯åˆ‡åˆ†æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ åˆ†å—æ–‡ä»¶</span><br><span class="line">	for(let i=0; i&lt;totalChunks; ++i)&#123;</span><br><span class="line">     </span><br><span class="line">		const start = i * chunkSize;</span><br><span class="line">		const end = Math.min(start + chunkSize, file.size);</span><br><span class="line">		const chunk = file.slice(start, end);</span><br><span class="line">		//è®¡ç®— chunk md5</span><br><span class="line">		const md5 = await getFileMd5(chunk);</span><br><span class="line">    	mergeVo.chunksMd5.push(md5);</span><br><span class="line">		// å‡†å¤‡FormData</span><br><span class="line">		const formData = new FormData();</span><br><span class="line">		formData.append(&#x27;file&#x27;, chunk);</span><br><span class="line">		formData.append(&#x27;filename&#x27;, file.name);</span><br><span class="line">		formData.append(&#x27;chunkIndex&#x27;, i.toString());</span><br><span class="line">		formData.append(&#x27;totalChunks&#x27;, totalChunks.toString());</span><br><span class="line">		formData.append(&#x27;md5&#x27;, md5);</span><br><span class="line">		//ä¸Šä¼ å½“å‰åˆ†å—</span><br><span class="line">		try &#123;</span><br><span class="line">     </span><br><span class="line">	      //å…ˆåˆ¤æ–­è¿™ä¸ªåˆ†å—æ˜¯å¦å·²ç»å­˜åœ¨</span><br><span class="line">	      const isExistRsp = await isChunkExist(&#123;</span><br><span class="line">     &quot;md5&quot;: formData.get(&quot;md5&quot;)&#125;);</span><br><span class="line">	      const isExist = isExistRsp.data;</span><br><span class="line">	      //ä¸å­˜åœ¨åˆ™ä¸Šä¼ </span><br><span class="line">	      if (!isExist)&#123;</span><br><span class="line">     </span><br><span class="line">	        const rsp = await addChunk(formData);</span><br><span class="line">	        console.log(`Chunk $&#123;</span><br><span class="line">       i + 1&#125;/$&#123;</span><br><span class="line">       totalChunks&#125; uploaded`, rsp.data);</span><br><span class="line">	      &#125;else &#123;</span><br><span class="line">     </span><br><span class="line">	        console.log(`Chunk $&#123;</span><br><span class="line">       i + 1&#125;/$&#123;</span><br><span class="line">       totalChunks&#125; is exist`);</span><br><span class="line">	      &#125;</span><br><span class="line">	      percentage.value = (i)*100 / totalChunks;</span><br><span class="line">		&#125; catch (error) &#123;</span><br><span class="line">     </span><br><span class="line">	      isUploadSuccess = false;</span><br><span class="line">		  console.error(`Error uploading chunk $&#123;</span><br><span class="line">       i + 1&#125;`, error);</span><br><span class="line">		  proxy?.$modal.msgError(`ä¸Šä¼ åˆ†å—$&#123;</span><br><span class="line">       i + 1&#125;å‡ºé”™`);</span><br><span class="line">		  break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">  //åˆå¹¶åˆ†å—æ–‡ä»¶</span><br><span class="line">  if(isUploadSuccess)&#123;</span><br><span class="line">     </span><br><span class="line">    proxy?.$modal.msgSuccess(&quot;åˆ†å—æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&quot;)</span><br><span class="line">    mergeVo.videoMd5 = form.value.id;//beforeUploadå·²ç»è®¡ç®—è¿‡è§†é¢‘æ–‡ä»¶çš„md5</span><br><span class="line">    //åˆå¹¶æ–‡ä»¶</span><br><span class="line">    const rsp = await mergeChunks(mergeVo);</span><br><span class="line">    if (rsp.code == HttpStatus.SUCCESS)&#123;</span><br><span class="line">     </span><br><span class="line">      //åˆå¹¶æ–‡ä»¶åï¼Œå®é™…ä¸Šåª’èµ„å·²ç»æ’å…¥æ•°æ®åº“ã€‚</span><br><span class="line">      percentage.value = 100;</span><br><span class="line">      proxy?.$modal.msgSuccess(&quot;æ–‡ä»¶åˆå¹¶æˆåŠŸ&quot;)</span><br><span class="line">      proxy?.$modal.msgSuccess(&quot;è§†é¢‘ä¸Šä¼ æˆåŠŸ&quot;)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">     </span><br><span class="line">      proxy?.$modal.msgSuccess(&quot;æ–‡ä»¶åˆå¹¶å¼‚å¸¸&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;else &#123;</span><br><span class="line">     </span><br><span class="line">    proxy?.$modal.msgSuccess(&quot;æ–‡ä»¶æœªä¸Šä¼ æˆåŠŸï¼Œè¯·é‡è¯•æˆ–è”ç³»ç®¡ç†å‘˜&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>language-javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">export const getMedia = (id: string | number): AxiosPromise&lt;MediaVO&gt; =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">  return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/media/media/&#x27; + id,</span><br><span class="line">    method: &#x27;get&#x27;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆ†å—æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="line"> * */</span><br><span class="line">export const isChunkExist = (data: any) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">  return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/media/media/video/chunk&#x27;,</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    params: data</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ä¸Šä¼ åˆ†å—æ–‡ä»¶</span><br><span class="line"> * */</span><br><span class="line">export const addChunk = (data: any) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">  return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/media/media/video/chunk&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data: data</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * åˆå¹¶åˆ†å—æ–‡ä»¶</span><br><span class="line"> * */</span><br><span class="line">export const mergeChunks = (data: any) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">  return request(&#123;</span><br><span class="line">   </span><br><span class="line">    url: &#x27;/media/media/video/chunk/merge&#x27;,</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    data: data</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h2><figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/media&quot;)</span><br><span class="line">public class MediaFilesController extends BaseController &#123;</span><br><span class="line">   </span><br><span class="line">    /**</span><br><span class="line">     * è·å–mediaè¯¦ç»†ä¿¡æ¯</span><br><span class="line">     *</span><br><span class="line">     * @param id ä¸»é”®</span><br><span class="line">     */</span><br><span class="line">    @GetMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="line">    public R&lt;MediaFilesVo&gt; getInfo(@NotNull(message = &quot;ä¸»é”®ä¸èƒ½ä¸ºç©º&quot;)</span><br><span class="line">                                   @PathVariable String id) &#123;</span><br><span class="line">   </span><br><span class="line">        return R.ok(mediaFilesService.queryById(id));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	@Log(title = &quot;è§†é¢‘åˆ†å—æ–‡ä»¶ä¸Šä¼ &quot;)</span><br><span class="line">    @PostMapping(value = &quot;/video/chunk&quot;)</span><br><span class="line">    public R&lt;String&gt; handleChunkUpload(</span><br><span class="line">        @RequestParam(&quot;file&quot;) MultipartFile file,</span><br><span class="line">        @RequestParam(&quot;md5&quot;) String md5,</span><br><span class="line">        @RequestParam(&quot;filename&quot;) String filename,</span><br><span class="line">        @RequestParam(&quot;chunkIndex&quot;) int chunkIndex,</span><br><span class="line">        @RequestParam(&quot;totalChunks&quot;) int totalChunks) &#123;</span><br><span class="line">   </span><br><span class="line">        if (ObjectUtil.isNull(file)) &#123;</span><br><span class="line">   </span><br><span class="line">            return R.fail(&quot;ä¸Šä¼ æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        Boolean b = mediaFilesService.handleChunkUpload(file, md5);</span><br><span class="line">        if (b)&#123;</span><br><span class="line">   </span><br><span class="line">            return R.ok();</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">   </span><br><span class="line">            return R.fail();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Log(title = &quot;åˆ†å—æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨&quot;)</span><br><span class="line">    @GetMapping(value = &quot;/video/chunk&quot;)</span><br><span class="line">    public R&lt;Boolean&gt; isChunkExist(@RequestParam(&quot;md5&quot;) String md5) &#123;</span><br><span class="line">   </span><br><span class="line">        return R.ok(mediaFilesService.isChunkExist(md5));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Log(title = &quot;åˆå¹¶è§†é¢‘æ–‡ä»¶&quot;)</span><br><span class="line">    @PostMapping(value = &quot;/video/chunk/merge&quot;)</span><br><span class="line">    public R&lt;Boolean&gt; mergeChunks(@RequestBody MediaVideoMergeBo bo) &#123;</span><br><span class="line">   </span><br><span class="line">        bo.setCompanyId(LoginHelper.getDeptId());</span><br><span class="line">        Boolean b = mediaFilesService.mergeChunks(bo);</span><br><span class="line">        if (b)&#123;</span><br><span class="line">   </span><br><span class="line">            return R.ok();</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">   </span><br><span class="line">            return R.fail();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…³äºå¦‚ä½•æ“ä½œMinioç­‰æ–‡ä»¶ç³»ç»Ÿï¼Œä¸è¯¦ç»†å†™æ˜è§£é‡Šã€‚åªéœ€è¦çŸ¥é“ï¼Œç»™Minioæä¾›æ–‡ä»¶æœ¬èº«ã€bucketNameã€pathå³å¯å®Œæˆä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ç­‰æ“ä½œã€‚å…·ä½“ä»£ç ä¸åŒçš„åŒ…éƒ½ä¸ä¸€æ ·ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class MediaFilesServiceImpl implements MediaFilesService &#123;</span><br><span class="line">   </span><br><span class="line">	@Autowired</span><br><span class="line">	private MediaFilesMapper mediaFilesMapper;</span><br><span class="line">    </span><br><span class="line">        /**</span><br><span class="line">     * åˆ†å—æ–‡ä»¶ä¸Šä¼ </span><br><span class="line">     * &lt;br/&gt;</span><br><span class="line">     * åˆ†å—æ–‡ä»¶ä¸å­˜æ”¾mysqlä¿¡æ¯ï¼ŒåŒæ—¶æ–‡ä»¶åä¸å«åç¼€ï¼Œåªæœ‰md5</span><br><span class="line">     * @param file æ–‡ä»¶</span><br><span class="line">     * @param md5  md5</span><br><span class="line">     * @return &#123;@link Boolean&#125;</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public Boolean handleChunkUpload(MultipartFile file, String md5) &#123;</span><br><span class="line">   </span><br><span class="line">        //åªä¸Šä¼ è‡³minio</span><br><span class="line">        OssClient storage = OssFactory.instance();</span><br><span class="line">        String path = getPathByMD5(md5, &quot;&quot;);</span><br><span class="line">        try &#123;</span><br><span class="line">   </span><br><span class="line">            storage.upload(file.getInputStream(), path, file.getContentType(), minioProperties.getVideoBucket());</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">   </span><br><span class="line">            throw new RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	@Override</span><br><span class="line">    public Boolean isChunkExist(String md5) &#123;</span><br><span class="line">   </span><br><span class="line">        OssClient storage = OssFactory.instance();</span><br><span class="line">        String path = getPathByMD5(md5, &quot;&quot;);</span><br><span class="line">        return storage.doesFileExist(minioProperties.getVideoBucket(), path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">    public Boolean mergeChunks(MediaVideoMergeBo bo) &#123;</span><br><span class="line">   </span><br><span class="line">        OssClient storage = OssFactory.instance();</span><br><span class="line">        String originalfileName = bo.getVideoName();</span><br><span class="line">        String suffix = StringUtils.substring(originalfileName, originalfileName.lastIndexOf(&quot;.&quot;), originalfileName.length());</span><br><span class="line">        //åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾åˆå¹¶æ–‡ä»¶</span><br><span class="line">        String tmpDir = System.getProperty(&quot;java.io.tmpdir&quot;);</span><br><span class="line">        String tmpFileName = UUID.randomUUID().toString() + &quot;.tmp&quot;;</span><br><span class="line">        File tmpFile = new File(tmpDir, tmpFileName);</span><br><span class="line"></span><br><span class="line">        try(</span><br><span class="line">            FileOutputStream fOut = new FileOutputStream(tmpFile);</span><br><span class="line">        ) &#123;</span><br><span class="line">   </span><br><span class="line">            //å°†åˆ†å—æ–‡ä»¶ä»¥æµçš„å½¢å¼copyåˆ°ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">            List&lt;String&gt; chunksMd5 = bo.getChunksMd5();</span><br><span class="line">            chunksMd5.forEach(chunkMd5 -&gt; &#123;</span><br><span class="line">   </span><br><span class="line">                String chunkPath = getPathByMD5(chunkMd5, &quot;&quot;);</span><br><span class="line">                InputStream chunkIn = storage.getObjectContent(minioProperties.getVideoBucket(), chunkPath);</span><br><span class="line">                IoUtil.copy(chunkIn, fOut);</span><br><span class="line">            &#125;);</span><br><span class="line">            //åˆå¹¶æ–‡ä»¶ä¸Šä¼ åˆ°minio</span><br><span class="line">            String videoMd5 = bo.getVideoMd5();</span><br><span class="line">            String path = getPathByMD5(videoMd5, suffix);</span><br><span class="line">            storage.upload(tmpFile, path, minioProperties.getVideoBucket());</span><br><span class="line">            //åˆ é™¤åˆ†å—æ–‡ä»¶</span><br><span class="line">            chunksMd5.forEach(chunkMd5-&gt;&#123;</span><br><span class="line">   </span><br><span class="line">                String chunkPath = getPathByMD5(chunkMd5, &quot;&quot;);</span><br><span class="line">                storage.delete(chunkPath, minioProperties.getVideoBucket());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">   </span><br><span class="line">            throw new RuntimeException(e);</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">   </span><br><span class="line">            if (tmpFile.exists())&#123;</span><br><span class="line">   </span><br><span class="line">                tmpFile.delete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //ä¸Šä¼ ä¿¡æ¯åˆ°mysql</span><br><span class="line">        MediaFiles mediaFiles = new MediaFiles();</span><br><span class="line">        mediaFiles.setId(bo.getVideoMd5());</span><br><span class="line">        mediaFiles.setCompanyId(bo.getCompanyId());</span><br><span class="line">        mediaFiles.setOriginalName(originalfileName);</span><br><span class="line">        mediaFiles.setFileSuffix(suffix);</span><br><span class="line">        mediaFiles.setSize(bo.getVideoSize());</span><br><span class="line">        mediaFiles.setPath(getPathByMD5(bo.getVideoMd5(), suffix));</span><br><span class="line">        mediaFiles.setRemark(bo.getRemark());</span><br><span class="line">        mediaFiles.setAuditStatus(MediaStatusEnum.UNREVIEWED.getValue());</span><br><span class="line">        return mediaFilesMapper.insert(mediaFiles) &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * é€šè¿‡md5ç”Ÿæˆæ–‡ä»¶è·¯å¾„</span><br><span class="line">     * &lt;br/&gt;</span><br><span class="line">     * æ¯”å¦‚</span><br><span class="line">     * md5 = 6c4acb01320a21ccdbec089f6a9b7ca3</span><br><span class="line">     * &lt;br/&gt;</span><br><span class="line">     * path = 6/c/md5 + suffix</span><br><span class="line">     * @param prefix å‰ç¼€</span><br><span class="line">     * @param suffix åç¼€</span><br><span class="line">     * @return &#123;@link String&#125;</span><br><span class="line">     */</span><br><span class="line">    public String getPathByMD5(String md5, String suffix) &#123;</span><br><span class="line">   </span><br><span class="line">        // æ–‡ä»¶è·¯å¾„</span><br><span class="line">        String path = md5.charAt(0) + &quot;/&quot; + md5.charAt(1) + &quot;/&quot; + md5;</span><br><span class="line">        return path + suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/03/2024-H1/2024-04-03-11-42-39/"><img class="fill" src="/Hexo/2024/04/03/2024-H1/2024-04-03-11-42-39/1718889269238.png" alt="RedisåŸºç¡€æ–‡æ¡£-01-å®‰è£…"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-03T11:42:39.000Z" title="4/3/2024, 11:42:39 AM">2024-04-03</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.366Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringCloud/">SpringCloud</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringCloud/Redis/">Redis</a></span><span class="level-item">1 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦136ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/03/2024-H1/2024-04-03-11-42-39/">RedisåŸºç¡€æ–‡æ¡£-01-å®‰è£…</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://www.redisdocs.com/zh-cn/docs/get-started/">å‚è€ƒæ–‡æ¡£-Rediså¿«é€Ÿå…¥é—¨æŒ‡å—-ä¸­æ–‡</a><br><a target="_blank" rel="noopener" href="https://redis.com.cn/">å‚è€ƒæ–‡æ¡£-Redis æ•™ç¨‹</a></p>
<h1 id="ä¸€ã€å¯åŠ¨å¹¶è¿æ¥"><a href="#ä¸€ã€å¯åŠ¨å¹¶è¿æ¥" class="headerlink" title="ä¸€ã€å¯åŠ¨å¹¶è¿æ¥"></a>ä¸€ã€å¯åŠ¨å¹¶è¿æ¥</h1><p>æœ¬åœ°å¯åŠ¨ä¸€ä¸ª<code>redis</code>æˆ–è€…ç”¨<code>redis cloud</code>å…è´¹è´¦æˆ·ï¼Œéƒ½å¯ä»¥ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name CommonTrain -p 6379:6379 -itd redis:7.2</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¸‹è½½<a target="_blank" rel="noopener" href="https://redis.com/redis-enterprise/redis-insight/">REDISINSIGHT</a>ã€‚  </p>
<img src="/Hexo/2024/04/03/2024-H1/2024-04-03-11-42-39/1718889269102.png" class="" title="This is an example image">  
<img src="/Hexo/2024/04/03/2024-H1/2024-04-03-11-42-39/1718889269238.png" class="" title="This is an example image">

<h1 id="äºŒã€æ”¯æŒçš„æ•°æ®ç±»å‹"><a href="#äºŒã€æ”¯æŒçš„æ•°æ®ç±»å‹" class="headerlink" title="äºŒã€æ”¯æŒçš„æ•°æ®ç±»å‹"></a>äºŒã€æ”¯æŒçš„æ•°æ®ç±»å‹</h1><ul>
<li>å­—ç¬¦ä¸²<code>string</code></li>
<li>å“ˆå¸Œ<code>hash</code></li>
<li>åˆ—è¡¨<code>list</code></li>
<li>é›†åˆ<code>set</code></li>
<li>æœ‰åºé›†åˆ<code>sorted set</code></li>
<li>ä½å›¾<code>bitmaps</code></li>
<li>åŸºæ•°ç»Ÿè®¡<code>hyperLogLogs</code></li>
</ul>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/04/02/2024-H1/2024-04-02-17-17-56/"><img class="fill" src="/Hexo/2024/04/02/2024-H1/2024-04-02-17-17-56/1718889273909.png" alt="Dockeréƒ¨ç½²MySQL8ä¸»ä»æ¨¡å¼"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-04-02T17:17:56.000Z" title="4/2/2024, 5:17:56 PM">2024-04-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.366Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringBoot3/">SpringBoot3</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringBoot3/Docker/">Docker</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringBoot3/MySQL/">MySQL</a></span><span class="level-item">3 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦461ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/04/02/2024-H1/2024-04-02-17-17-56/">Dockeréƒ¨ç½²MySQL8ä¸»ä»æ¨¡å¼</a></p><div class="content"><p>â€‹  </p>
<h4 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h4><ul>
<li><a href="#%E4%B8%80%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8">ä¸€ã€è¿è¡Œå®¹å™¨</a></li>
<li><a href="#%E4%BA%8C%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8E">äºŒã€é…ç½®ä¸»ä»</a></li>
<li><a href="#%E4%B8%89%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C">ä¸‰ã€æµ‹è¯•æ•ˆæœ</a></li>
</ul>
<br />

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Mysql</td>
<td>8.1.0</td>
</tr>
<tr>
<td>Docker</td>
<td>24.0.5</td>
</tr>
</tbody></table>
<p>å…³äºä¸»ä»æ¨¡å¼ï¼Œ<code>Mysql</code>ä»<code>8.0</code>ä¸€äº›ç‰ˆæœ¬å¼€å§‹ï¼Œæœ‰è®¸å¤šå˜åŒ–ï¼Œè¿™é‡Œä½¿ç”¨<code>8.1.0</code> ã€‚</p>
<h1 id="ä¸€ã€è¿è¡Œå®¹å™¨"><a href="#ä¸€ã€è¿è¡Œå®¹å™¨" class="headerlink" title="ä¸€ã€è¿è¡Œå®¹å™¨"></a>ä¸€ã€è¿è¡Œå®¹å™¨</h1><p>æ–°å»ºä¸¤ä¸ª<code>MySQL</code>æ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ–°å»º<code>data</code>æ–‡ä»¶å¤¹å’Œ<code>conf/my.cnf</code>æ–‡ä»¶ã€‚<br>æ ¹æ®éœ€è¦ç†è§£å¹¶æ›´æ”¹ä»¥ä¸‹è„šæœ¬ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">containerName=&quot;MyWeb02-MySQL&quot;</span><br><span class="line">MySQLData=&quot;/root/MyWeb02/MySQL/data&quot;</span><br><span class="line">MySQLConf=&quot;/root/MyWeb02/MySQL/conf/my.cnf&quot;</span><br><span class="line"></span><br><span class="line">containerSlaveName=&quot;MyWeb02-MySQL-Slave&quot;</span><br><span class="line">MySQLSlaveData=&quot;/root/MyWeb02/MySQL-Slave/data&quot;</span><br><span class="line">MySQLSlaveConf=&quot;/root/MyWeb02/MySQL-Slave/conf/my.cnf&quot;</span><br><span class="line"></span><br><span class="line">docker run  -d --name &quot;$containerName&quot; \</span><br><span class="line">            -p 3307:3306 \</span><br><span class="line">            -v &quot;$MySQLData&quot;:/var/lib/mysql \</span><br><span class="line">            -v &quot;$MySQLConf&quot;:/etc/mysql/my.cnf \</span><br><span class="line">            -e MYSQL_ROOT_PASSWORD=20028888 \</span><br><span class="line">            mysql:8</span><br><span class="line"></span><br><span class="line">docker run  -d --name &quot;$containerSlaveName&quot; \</span><br><span class="line">            -p 3308:3306 \</span><br><span class="line">            -v &quot;$MySQLSlaveData&quot;:/var/lib/mysql \</span><br><span class="line">            -v &quot;$MySQLSlaveConf&quot;:/etc/mysql/my.cnf \</span><br><span class="line">            -e MYSQL_ROOT_PASSWORD=20028888 \</span><br><span class="line">            mysql:8</span><br><span class="line">            </span><br></pre></td></tr></table></figure>

<p>ä¸»èŠ‚ç‚¹çš„<code>my.cnf</code>å®¹å™¨å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">server-id=1</span><br><span class="line">log_bin=mysql-bin</span><br></pre></td></tr></table></figure>

<p>ä»èŠ‚ç‚¹çš„<code>my.cnf</code>å®¹å™¨å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">server-id=2</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè„šæœ¬ã€‚  </p>
<img src="/Hexo/2024/04/02/2024-H1/2024-04-02-17-17-56/1718889273598.png" class="" title="This is an example image">

<h1 id="äºŒã€é…ç½®ä¸»ä»"><a href="#äºŒã€é…ç½®ä¸»ä»" class="headerlink" title="äºŒã€é…ç½®ä¸»ä»"></a>äºŒã€é…ç½®ä¸»ä»</h1><p>åˆ°ä¸»èŠ‚ç‚¹å‘½ä»¤è¡Œï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plaintext"><figcaption><span>language-sql</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;replica&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;replica&#x27;;</span><br><span class="line">GRANT REPLICATION SLAVE ON *.* TO &#x27;replica&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<p>åˆ°ä»èŠ‚ç‚¹å‘½ä»¤è¡Œï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plaintext"><figcaption><span>language-sql</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CHANGE REPLICATION SOURCE TO </span><br><span class="line">SOURCE_HOST=&#x27;172.17.0.6&#x27;,</span><br><span class="line">SOURCE_PORT=3306,</span><br><span class="line">SOURCE_USER=&#x27;replica&#x27;,</span><br><span class="line">SOURCE_PASSWORD=&#x27;replica&#x27;;</span><br><span class="line">START REPLICA; //å¼€å¯å¤‡ä»½</span><br><span class="line">SHOW REPLICA STATUS\G //æŸ¥çœ‹ä¸»ä»æƒ…å†µ</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>SOURCE_HOST</code>ä¸ºä¸»èŠ‚ç‚¹å®¹å™¨çš„<code>ip</code>ã€‚<br>æŸ¥çœ‹ä¸»ä»æƒ…å†µæ—¶ï¼Œä¸»è¦æ³¨æ„ä¸‹é¢ä¸¤ä¸ªå­—æ®µæ˜¯å¦ä¸º<code>Yes</code>ã€‚ä¸æ˜¯çš„è¯ï¼Œå°±æœ‰é—®é¢˜ï¼Œè¯»<code>docker logs</code>ç„¶åå»è§£å†³å®ƒã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Slave_IO_Running: Yes</span><br><span class="line">Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Navicatç­‰ç¬¬ä¸‰æ–¹è½¯ä»¶å¯èƒ½ä¸æ”¯æŒ\Gï¼Œç»“æœä»¥è¡Œæ˜¾ç¤ºã€‚</p>
</blockquote>
<img src="/Hexo/2024/04/02/2024-H1/2024-04-02-17-17-56/1718889273909.png" class="" title="This is an example image">

<h1 id="ä¸‰ã€æµ‹è¯•æ•ˆæœ"><a href="#ä¸‰ã€æµ‹è¯•æ•ˆæœ" class="headerlink" title="ä¸‰ã€æµ‹è¯•æ•ˆæœ"></a>ä¸‰ã€æµ‹è¯•æ•ˆæœ</h1><p>åœ¨ä¸»èŠ‚ç‚¹æ–°å»ºä¸€ä¸ªæ•°æ®åº“</p>
<figure class="highlight plaintext"><figcaption><span>language-bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database `test`;</span><br></pre></td></tr></table></figure>

<p>éšåå¯ä»¥åœ¨ä»èŠ‚ç‚¹ä¹Ÿçœ‹åˆ°æ•ˆæœã€‚</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/"><img class="fill" src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889274041.png" alt="Java - JVM"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-03-05T14:31:40.000Z" title="3/5/2024, 2:31:40 PM">2024-03-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.358Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/JavaSE/">JavaSE</a></span><span class="level-item">8 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1231ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/">Java - JVM</a></p><div class="content"><h1 id="ä¸€ã€JVM"><a href="#ä¸€ã€JVM" class="headerlink" title="ä¸€ã€JVM"></a>ä¸€ã€JVM</h1><h2 id="1-JVMçš„ä½œç”¨"><a href="#1-JVMçš„ä½œç”¨" class="headerlink" title="1. JVMçš„ä½œç”¨"></a>1. JVMçš„ä½œç”¨</h2><img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889273085.png" class="" title="This is an example image">  
<p><code>Java</code>ä»£ç ç¼–è¯‘æˆ<code>java</code>å­—èŠ‚ç åï¼Œè¿è¡Œåœ¨<code>JVM</code>ä¸­ï¼Œåªè¦é’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿéƒ½å¼€å‘<code>JVM</code>åï¼Œ<code>java</code>å°±å®ç°äº†è·¨å¹³å°ã€‚</p>
<h2 id="2-JVMã€JREã€JDKçš„å…³ç³»"><a href="#2-JVMã€JREã€JDKçš„å…³ç³»" class="headerlink" title="2. JVMã€JREã€JDKçš„å…³ç³»"></a>2. JVMã€JREã€JDKçš„å…³ç³»</h2><img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889273288.png" class="" title="This is an example image">

<h2 id="3-JVMçš„ç»„æˆ"><a href="#3-JVMçš„ç»„æˆ" class="headerlink" title="3. JVMçš„ç»„æˆ"></a>3. JVMçš„ç»„æˆ</h2><ol>
<li>ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰</li>
<li>è¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Area)</li>
<li>æ‰§è¡Œå¼•æ“(Execution Engine)</li>
<li>æœ¬åœ°åº“æ¥å£ï¼ˆNative Interfaceï¼‰</li>
</ol>
<h2 id="4-JVMå·¥ä½œæµç¨‹"><a href="#4-JVMå·¥ä½œæµç¨‹" class="headerlink" title="4. JVMå·¥ä½œæµç¨‹"></a>4. JVMå·¥ä½œæµç¨‹</h2><img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889273338.png" class="" title="This is an example image">  
<p><code>ClassLoader</code>è´Ÿè´£åŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œè‡³äºæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œç”±<code>Execution Engine</code>å†³å®šã€‚<br><code>Execution Engine</code>æŠŠæŒ‡ä»¤å’Œæ•°æ®ä¿¡æ¯åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”è´Ÿè´£æŠŠå‘½ä»¤è§£é‡Šåˆ°æ“ä½œç³»ç»Ÿï¼Œå°†<code>JVM</code>æŒ‡ä»¤é›†ç¿»è¯‘æˆæ“ä½œç³»ç»ŸæŒ‡ä»¤é›†ã€‚<br>å½“<code>Execution Engine</code>æ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼Œå¯èƒ½ä¼šè°ƒç”¨ä¸€äº›æœ¬åœ°çš„æ¥å£ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°<code>Native Interface</code>ï¼Œä¸»è¦è´Ÿè´£è°ƒç”¨æœ¬åœ°çš„æ¥å£ç»™<code>java</code>ç¨‹åºä½¿ç”¨ï¼Œä¼šåœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­è®°å½•å¯¹åº”çš„æœ¬åœ°æ–¹æ³•ã€‚</p>
<h2 id="5-è¿è¡Œæ—¶æ–¹æ³•åŒºRuntime-Data-Area"><a href="#5-è¿è¡Œæ—¶æ–¹æ³•åŒºRuntime-Data-Area" class="headerlink" title="5. è¿è¡Œæ—¶æ–¹æ³•åŒºRuntime Data Area"></a>5. è¿è¡Œæ—¶æ–¹æ³•åŒºRuntime Data Area</h2><p>æ˜¯JVMæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œè¿è¡Œæ—¶æ•°æ®åŒºçš„ç»„æˆä¸»è¦åŒ…å«ä»¥ä¸‹</p>
<ol>
<li><code>PC Register</code>ï¼ˆç¨‹åºè®¡æ•°å™¨ï¼‰<br>ç¨‹åºè®¡æ•°å™¨æ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œå¾ªç¯ï¼Œè·³è½¬ï¼Œå¼‚å¸¸å¤„ç†ï¼Œçº¿ç¨‹çš„æ¢å¤ç­‰å·¥ä½œéƒ½éœ€è¦ä¾èµ–ç¨‹åºè®¡æ•°å™¨å»å®Œæˆã€‚ç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯å’Œçº¿ç¨‹ä¿æŒä¸€è‡´çš„ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<code>N</code> ä¸ªæ ¸æ•°çš„ <code>CPU</code> åœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šæœ‰ <code>N</code>ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œåœ¨æˆ‘ä»¬çœŸå®çš„ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šåˆ›å»ºå¾ˆå¤šçº¿ç¨‹ï¼Œ<code>JVM</code> çš„å¤šçº¿ç¨‹å…¶å®æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢ï¼Œåˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´æ¥å®ç°çš„ã€‚æ—¢ç„¶æ¶‰åŠçš„çº¿ç¨‹åˆ‡æ¢ï¼Œæ‰€ä»¥æ¯æ¡çº¿ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ã€‚</li>
<li><code>Stack </code>(Javaè™šæ‹Ÿæœºæ ˆï¼‰<br>è™šæ‹Ÿæœºæ ˆï¼Œå…¶æè¿°çš„å°±æ˜¯çº¿ç¨‹å†…å­˜æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ç§°ä½œçº¿ç¨‹æ ˆï¼Œä¹Ÿæ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„ï¼Œç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ä¿æŒä¸€è‡´ã€‚åœ¨æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>jvm</code> éƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§å»å­˜å‚¨å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€è¿æ¥ï¼Œæ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚ä¸€ä¸ªæ–¹æ³•çš„ç”Ÿå‘½å‘¨æœŸå°±è´¯å½»äº†ä¸€ä¸ªæ ˆå¸§ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„å…¨éƒ¨è¿‡ç¨‹ã€‚</li>
<li><code>Native Method Stack</code> (æœ¬åœ°æ–¹æ³•æ ˆ)<br>æœ¬åœ°æ–¹æ³•æ ˆçš„æ¦‚å¿µå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<code>java</code>åº•å±‚ç”¨äº†å¾ˆå¤š<code>c</code>çš„ä»£ç å»å®ç°ï¼Œè€Œå…¶è°ƒç”¨<code>c</code>ç«¯çš„æ–¹æ³•ä¸Šéƒ½ä¼šæœ‰<code>native</code>ï¼Œä»£è¡¨æœ¬åœ°æ–¹æ³•æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆå°±æ˜¯ä¸ºå…¶æœåŠ¡çš„ã€‚</li>
<li><code>Heap</code>(å †)<br>å¯ä»¥è¯´æ˜¯ <code>JVM</code> ä¸­æœ€å¤§çš„ä¸€å—å„¿å†…å­˜åŒºåŸŸäº†ï¼Œå®ƒæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œä¸ç®¡ä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯èµ„æ·±å¼€å‘ï¼Œå¤šå°‘éƒ½ä¼šå¬è¯´è¿‡å †ï¼Œæ¯•ç«Ÿå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šåœ¨å †ä¸­åˆ†é…ã€‚</li>
<li><code>Method Area</code>ï¼ˆæ–¹æ³•åŒºï¼‰<br>æ–¹æ³•åŒºä¹Ÿæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œå®ƒå­˜å‚¨äº†è¢« <code>jvm</code> åŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ã€‚è¿è¡Œæ—¶å¸¸é‡æ± å°±æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨å°±å­˜å‚¨åœ¨å…¶ä¸­ã€‚</li>
</ol>
<img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889273505.png" class="" title="This is an example image">
<blockquote>
<p>ğŸ’¡ éšç€Java 7åŠä»¥åç‰ˆæœ¬çš„å‘å¸ƒï¼Œè™½ç„¶å­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»è‡³å †å†…å­˜ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± ä»ç„¶æ˜¯æ–¹æ³•åŒºï¼ˆæˆ–Java 8ä¸­çš„å…ƒç©ºé—´ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚<br>ğŸ’¡ åœ¨Java 8ä¹‹å‰ï¼Œæ–¹æ³•åŒºçš„å®ç°è¢«ç§°ä¸ºæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ï¼Œå¹¶ä¸”æ˜¯å †çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬è¯´â€æ–¹æ³•åŒºâ€æ—¶ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œå®ƒæ˜¯JVMçš„ä¸€ä¸ªç‹¬ç«‹é€»è¾‘éƒ¨åˆ†ï¼Œä½†åœ¨HotSpot JVMçš„å…·ä½“å®ç°ä¸­ï¼Œç›´åˆ°Java 7ä¸ºæ­¢ï¼Œå®ƒæ˜¯ä½œä¸ºå †å†…å­˜ç»“æ„çš„ä¸€ä¸ªéƒ¨åˆ†ï¼ˆå³æ°¸ä¹…ä»£ï¼‰æ¥å®ç°çš„ï¼Œæ°¸ä¹…ä»£æ˜¯å †çš„ä¸€ä¸ªç‰©ç†éƒ¨åˆ†ã€‚<br>ğŸ’¡ä»Java 8å¼€å§‹ï¼ŒHotSpot JVMå»é™¤äº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œå¼•å…¥äº†å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ï¼Œå¹¶ä¸”å…ƒç©ºé—´æ˜¯åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯åœ¨å †å†…å­˜ä¸­ã€‚å› æ­¤ï¼Œåœ¨Java 8åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œæ–¹æ³•åŒºçš„å®ç°ä»æ°¸ä¹…ä»£å˜ä¸ºäº†å…ƒç©ºé—´ï¼Œæ–¹æ³•åŒºï¼ˆç°åœ¨é€šå¸¸æŒ‡çš„æ˜¯å…ƒç©ºé—´ï¼‰ä¸å †å†…å­˜æ˜¯å®Œå…¨åˆ†å¼€çš„ã€‚</p>
</blockquote>
<img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889273798.png" class="" title="This is an example image">
<blockquote>
<p>ğŸ’¡ å…ƒç©ºé—´åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œåªè¦å†…å­˜è¶³å¤Ÿï¼Œå°±ä¸ä¼šå‡ºç°OOMï¼ˆOut of Memoryï¼‰ã€‚å…ƒç©ºé—´çš„æ¦‚å¿µä»ç„¶åœ¨JVMå†…å­˜æ¨¡å‹ä¸­ã€‚</p>
</blockquote>
<img src="/Hexo/2024/03/05/2024-H1/2024-03-05-14-31-40/1718889274041.png" class="" title="This is an example image">

<h1 id="äºŒã€æ·±å…¥JVMå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰"><a href="#äºŒã€æ·±å…¥JVMå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰" class="headerlink" title="äºŒã€æ·±å…¥JVMå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰"></a>äºŒã€æ·±å…¥JVMå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰</h1><p>ã€‚ã€‚ã€‚å¾…ç»­</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/"><img class="fill" src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878741.png" alt="JavaSE-å¤šçº¿ç¨‹"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-02-23T20:04:04.000Z" title="2/23/2024, 8:04:04 PM">2024-02-23</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.350Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/JavaSE/">JavaSE</a></span><span class="level-item">9 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1361ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/">JavaSE-å¤šçº¿ç¨‹</a></p><div class="content"><h1 id="1-åˆ›å»ºçº¿ç¨‹"><a href="#1-åˆ›å»ºçº¿ç¨‹" class="headerlink" title="1.åˆ›å»ºçº¿ç¨‹"></a>1.åˆ›å»ºçº¿ç¨‹</h1><p>åˆ›å»ºçº¿ç¨‹æœ‰ä¸‰ç§æ–¹å¼ï¼Œéƒ½éœ€è¦å­ç±»ï¼Œç„¶ååœ¨ä¸»ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚</p>
<h3 id="å…¶ä¸€"><a href="#å…¶ä¸€" class="headerlink" title="å…¶ä¸€"></a>å…¶ä¸€</h3><p>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•ï¼Œè¿™ç§æ–¹å¼ç®€å•ï¼Œä½†æ˜¯æ²¡æ³•ç»§æ‰¿å…¶ä»–ç±»ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Test01_01 extends Thread&#123;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">   </span><br><span class="line">        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            logger.info(&quot;thread sout:&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread t = new Test01_01();</span><br><span class="line">t.start();</span><br></pre></td></tr></table></figure>

<h3 id="å…¶äºŒ"><a href="#å…¶äºŒ" class="headerlink" title="å…¶äºŒ"></a>å…¶äºŒ</h3><p>å®ç°Runnableæ¥å£ï¼Œé‡å†™runæ–¹æ³•ï¼Œè¿™ç§æ–¹å¼é¿å…äº†æ— æ³•ç»§æ‰¿åˆ«çš„ç±»çš„ç¼ºé™·ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Test02_01 implements Runnable&#123;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">   </span><br><span class="line">        Thread cut = Thread.currentThread();</span><br><span class="line">        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            System.out.println(&quot;thread [&quot;+cut.getName()+&quot;]&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Runnable target = new Test02_01();</span><br><span class="line">new Thread(target).start();</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨lambdaè¡¨è¾¾å¼</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new Thread(()-&gt;&#123;</span><br><span class="line">   </span><br><span class="line">    Thread cut = Thread.currentThread();</span><br><span class="line">        for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            System.out.println(&quot;thread [&quot;+cut.getName()+&quot;]&quot;+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä¸‰"><a href="#å…¶ä¸‰" class="headerlink" title="å…¶ä¸‰"></a>å…¶ä¸‰</h3><p>å®ç°Callableæ¥å£ï¼Œé‡å†™callæ–¹æ³•ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å–å¾—çº¿ç¨‹çš„è¿”å›å€¼ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">private static class Test04_01 implements Callable&lt;Long&gt;&#123;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">    public Long call() throws Exception &#123;</span><br><span class="line">   </span><br><span class="line">        Thread cut = Thread.currentThread();</span><br><span class="line">        System.out.println(&quot;å½“å‰çº¿ç¨‹:&quot;+cut.getName());</span><br><span class="line">        long res = 0;</span><br><span class="line">        for (int i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            for (int j = 0; j &lt; 100; j++) &#123;</span><br><span class="line">   </span><br><span class="line">                res += j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Callable&lt;Long&gt; call = new Test04_01();</span><br><span class="line">FutureTask&lt;Long&gt; task = new FutureTask&lt;&gt;(call);</span><br><span class="line">new Thread(task).start();</span><br><span class="line">Long l = task.get();</span><br><span class="line">System.out.println(l);</span><br></pre></td></tr></table></figure>

<h1 id="2-çº¿ç¨‹å¸¸ç”¨æ–¹å¼"><a href="#2-çº¿ç¨‹å¸¸ç”¨æ–¹å¼" class="headerlink" title="2.çº¿ç¨‹å¸¸ç”¨æ–¹å¼"></a>2.çº¿ç¨‹å¸¸ç”¨æ–¹å¼</h1><img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878503.png" class="" title="This is an example image">

<h1 id="3-çº¿ç¨‹åŒæ­¥"><a href="#3-çº¿ç¨‹åŒæ­¥" class="headerlink" title="3.çº¿ç¨‹åŒæ­¥"></a>3.çº¿ç¨‹åŒæ­¥</h1><p>ä¸‰ç§åŠæ³•</p>
<h3 id="å…¶ä¸€-1"><a href="#å…¶ä¸€-1" class="headerlink" title="å…¶ä¸€"></a>å…¶ä¸€</h3><p>åŒæ­¥ä»£ç å—ï¼Œåœ¨ç±»ä¸­ä½¿ç”¨</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">synchronized (LockObject)&#123;</span><br><span class="line">   </span><br><span class="line">	//your code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºç¤ºä¾‹æ–¹æ³•ï¼Œä½¿ç”¨thisä½œä¸ºLockObjectï¼Œ<br>å¯¹äºé™æ€æ–¹æ³•ï¼Œä½¿ç”¨ç±»å.classä½œä¸ºLockObject</p>
<h3 id="å…¶äºŒ-1"><a href="#å…¶äºŒ-1" class="headerlink" title="å…¶äºŒ"></a>å…¶äºŒ</h3><p>åŒæ­¥æ–¹æ³•ï¼Œåœ¨æ–¹æ³•å‰åŠ ä¸Š<code>synchronized</code> å…³é”®å­—<br>åŒæ­¥æ–¹æ³•å…¶å®åº•å±‚ä¹Ÿæ˜¯æœ‰éšå¼é”å¯¹è±¡çš„,åªæ˜¯é”çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ä»£ç ã€‚<br>å¦‚æœæ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨thisä½œä¸ºçš„é”å¯¹è±¡ã€‚<br>å¦‚æœæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨ç±»å.classä½œä¸ºçš„é”å¯¹è±¡ã€‚</p>
<h3 id="å…¶ä¸‰-1"><a href="#å…¶ä¸‰-1" class="headerlink" title="å…¶ä¸‰"></a>å…¶ä¸‰</h3><p>Locké”ï¼Œå®šä¹‰ä¸€æŠŠé”ï¼Œéœ€è¦åŠ é”æ—¶lockï¼Œç»“æŸæ—¶unlockï¼Œ</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private final Lock lk = new ReentrantLock();</span><br><span class="line">try &#123;</span><br><span class="line">   </span><br><span class="line">       lk.lock();</span><br><span class="line">       money -= 1;</span><br><span class="line">     &#125; catch (Exception e) &#123;</span><br><span class="line">   </span><br><span class="line">         throw new RuntimeException(e);</span><br><span class="line">     &#125; finally &#123;</span><br><span class="line">   </span><br><span class="line">         lk.unlock();</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-çº¿ç¨‹æ± "><a href="#4-çº¿ç¨‹æ± " class="headerlink" title="4.çº¿ç¨‹æ± "></a>4.çº¿ç¨‹æ± </h1><p>åˆ›å»ºçº¿ç¨‹çš„å¼€é”€æ˜¯å¾ˆå¤§çš„ã€‚ä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥å¤ç”¨çº¿ç¨‹ï¼Œè¿­ä»£ä»»åŠ¡ä¸è¿­ä»£çº¿ç¨‹ï¼Œè¿™æ ·æ„å‘³ç€ï¼Œæˆ‘ä»¬åªèƒ½åªç”¨Runnableå’ŒCallableçš„æ–¹å¼å¼€å¤šçº¿ç¨‹ã€‚</p>
<h3 id="åˆ›å»ºçº¿ç¨‹æ± "><a href="#åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="åˆ›å»ºçº¿ç¨‹æ± "></a>åˆ›å»ºçº¿ç¨‹æ± </h3><figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ThreadPoolExecutor threadPool = new ThreadPoolExecutor(3, 5, 8, TimeUnit.SECONDS,</span><br><span class="line">        new ArrayBlockingQueue&lt;&gt;(4),</span><br><span class="line">        Executors.defaultThreadFactory(),</span><br><span class="line">        new ThreadPoolExecutor.CallerRunsPolicy());</span><br></pre></td></tr></table></figure>

<p>ä¸ƒä¸ªå‚æ•°çš„æ„æ€åˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆä¸€ç›´å­˜æ´»çš„çº¿ç¨‹æ•°ï¼‰</li>
<li>æœ€å¤§çº¿ç¨‹æ•°ï¼ˆæœ€å¤§-æ ¸å¿ƒ&#x3D;å…è®¸å­˜åœ¨çš„ä¸´æ—¶çº¿ç¨‹æ•°ï¼‰</li>
<li>ä¸´æ—¶çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼ˆå¦‚æœä¸´æ—¶çº¿ç¨‹è¶…è¿‡è¿™ä¸ªæ—¶é—´æ²¡æœ‰è¢«åˆ†é…ä»»åŠ¡å°±æ¶ˆäº¡ï¼‰</li>
<li>å­˜æ´»æ—¶é—´å•ä½</li>
<li>ç­‰å¾…é˜Ÿåˆ—ï¼ˆArrayBlockingQueueå¯¹è±¡ï¼Œéœ€æŒ‡å®šé•¿åº¦ï¼Œè¢«çº¿ç¨‹æ‹¿èµ°çš„ä»»åŠ¡ä¸ç®—åœ¨ç­‰å¾…é˜Ÿåˆ—ï¼‰</li>
<li>çº¿ç¨‹å·¥å‚ï¼ˆä½¿ç”¨Executorså·¥å…·ç±»å³å¯ï¼‰</li>
<li>æ‹’ç»ç­–ç•¥ï¼ˆçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œæ–°çš„ä»»åŠ¡æ€ä¹ˆå¤„ç†ï¼‰</li>
</ol>
<p>ä¸´æ—¶çº¿ç¨‹çš„å¼€å¯æ¡ä»¶ä¸ºï¼Œä¸€ä¸ªæ–°ä»»åŠ¡æ¥äº†ï¼Œæ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼ŒåŒæ—¶ç­‰å¾…é˜Ÿåˆ—å·²æ»¡ï¼ŒåŒæ—¶çº¿ç¨‹æ•°è¿˜æ²¡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°æ—¶ï¼Œä¸´æ—¶çº¿ç¨‹è¢«åˆ›å»ºï¼Œæ‹¿èµ°æ–°ä»»åŠ¡ã€‚</p>
<h3 id="çº¿ç¨‹æ± å¸¸ç”¨æ–¹æ³•"><a href="#çº¿ç¨‹æ± å¸¸ç”¨æ–¹æ³•" class="headerlink" title="çº¿ç¨‹æ± å¸¸ç”¨æ–¹æ³•"></a>çº¿ç¨‹æ± å¸¸ç”¨æ–¹æ³•</h3><img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878560.png" class="" title="This is an example image">  
<p>æ‰§è¡Œ<code>Runnable</code>ä»»åŠ¡å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Runnable target1 = new MyRunnable();</span><br><span class="line">threadPool.execute(target1);// core 1</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ<code>Callable</code>ä»»åŠ¡å¦‚ä¸‹</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Callable&lt;Integer&gt; callableTask = new MyCallable();</span><br><span class="line">Future&lt;Integer&gt; future = threadPool.submit(callableTask);</span><br></pre></td></tr></table></figure>

<h3 id="æ‹’ç»ç­–ç•¥"><a href="#æ‹’ç»ç­–ç•¥" class="headerlink" title="æ‹’ç»ç­–ç•¥"></a>æ‹’ç»ç­–ç•¥</h3><img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878603.png" class="" title="This is an example image">

<h3 id="çº¿ç¨‹æ± å·¥å…·ç±»"><a href="#çº¿ç¨‹æ± å·¥å…·ç±»" class="headerlink" title="çº¿ç¨‹æ± å·¥å…·ç±»"></a>çº¿ç¨‹æ± å·¥å…·ç±»</h3><img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878657.png" class="" title="This is an example image">  
<p>è¿™æ ·å°±ä¸ç”¨è‡ªå·±å»è®¾è®¡<code>ThreadPoolExecutor</code>äº†ï¼Œ<code>Executors</code>åº•å±‚æ˜¯å°è£…<code>ThreadPoolExecutor</code>çš„ã€‚</p>
<p>ä¸€ä¸ªç»éªŒä¹‹è°ˆ<br>è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡&#x3D;CPUæ ¸æ•° + 1<br>IOå¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡&#x3D;CPUæ ¸æ•° * 2</p>
<img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878702.png" class="" title="This is an example image">

<h1 id="5-å¹¶è¡Œå¹¶å‘"><a href="#5-å¹¶è¡Œå¹¶å‘" class="headerlink" title="5.å¹¶è¡Œå¹¶å‘"></a>5.å¹¶è¡Œå¹¶å‘</h1><table>
<thead>
<tr>
<th>å¹¶å‘</th>
<th>å¹¶è¡Œ</th>
</tr>
</thead>
<tbody><tr>
<td>CPUèƒ½åŒæ—¶å¤„ç†çº¿ç¨‹çš„æ•°é‡æœ‰é™,ä¸ºäº†ä¿è¯å…¨éƒ¨çº¿ç¨‹éƒ½èƒ½å¾€å‰æ‰§è¡Œ,CPUä¼šè½®å·¡ä¸ºç³»ç»Ÿçš„æ¯ä¸ªçº¿ç¨‹æœåŠ¡,ç”±äºCPUåˆ‡æ¢çš„é€Ÿåº¦å¾ˆå¿«,ç»™æˆ‘ä»¬çš„æ„Ÿè§‰è¿™äº›çº¿ç¨‹åœ¨åŒæ—¶æ‰§è¡Œ,è¿™å°±æ˜¯å¹¶å‘ã€‚</td>
<td>åœ¨åŒä¸€ä¸ªæ—¶åˆ»ä¸Šï¼ŒåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹åœ¨è¢«CPUè°ƒåº¦æ‰§è¡Œã€‚</td>
</tr>
</tbody></table>
<p>å¤šçº¿ç¨‹æ˜¯å¹¶å‘å’Œå¹¶è¡ŒåŒæ—¶è¿›è¡Œçš„ï¼  </p>
<img src="/Hexo/2024/02/23/2024-H1/2024-02-23-20-04-04/1718889878741.png" class="" title="This is an example image">

<h1 id="6-æ‚²è§‚ä¹è§‚é”"><a href="#6-æ‚²è§‚ä¹è§‚é”" class="headerlink" title="6.æ‚²è§‚ä¹è§‚é”"></a>6.æ‚²è§‚ä¹è§‚é”</h1><table>
<thead>
<tr>
<th>æ‚²è§‚é”</th>
<th>ä¹è§‚é”</th>
</tr>
</thead>
<tbody><tr>
<td>ä¸€ä¸Šæ¥å°±åŠ é”ï¼Œæ²¡æœ‰å®‰å…¨æ„Ÿã€‚æ¯æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è®¿é—®å®Œæ¯•å,å†è§£é”ã€‚çº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå·®ï¼</td>
<td>ä¸€å¼€å§‹ä¸ä¸Šé”ï¼Œè®¤ä¸ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¤§å®¶ä¸€èµ·è·‘ï¼Œç­‰è¦å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ—¶å€™æ‰å¼€å§‹æ§åˆ¶ã€‚çº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚</td>
</tr>
</tbody></table>
<p>ä¸Šè¿°ä¸‰ç§çº¿ç¨‹åŒæ­¥é»˜è®¤éƒ½æ˜¯æ‚²è§‚é”ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ‚²è§‚é”å’Œä¹è§‚é”æ¯”è¾ƒä»£ç </p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">public class PostLock01 &#123;</span><br><span class="line">   </span><br><span class="line">    private static class MyRunnable01 implements Runnable&#123;</span><br><span class="line">   </span><br><span class="line">        private int number;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">   </span><br><span class="line">            for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">   </span><br><span class="line">                synchronized (this)&#123;</span><br><span class="line">   </span><br><span class="line">                    ++number;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    private static class MyRunnable02 implements Runnable&#123;</span><br><span class="line">   </span><br><span class="line">//        private int number;</span><br><span class="line">        private AtomicInteger number = new AtomicInteger();</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">   </span><br><span class="line">            for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">   </span><br><span class="line">                number.incrementAndGet();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">   </span><br><span class="line">        long timeStart, timeEnd;</span><br><span class="line">        timeStart = System.currentTimeMillis();</span><br><span class="line">        pessLock();</span><br><span class="line">        timeEnd = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;pessimism : &quot;+(timeEnd - timeStart)+&quot; ms&quot;);</span><br><span class="line"></span><br><span class="line">        timeStart = System.currentTimeMillis();</span><br><span class="line">        optiLock();</span><br><span class="line">        timeEnd = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;optimism : &quot;+(timeEnd - timeStart)+&quot; ms&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void pessLock()&#123;</span><br><span class="line">   </span><br><span class="line">        Runnable target = new MyRunnable01();</span><br><span class="line">        for (int i = 0; i &lt; 32; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            new Thread(target).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void optiLock()&#123;</span><br><span class="line">   </span><br><span class="line">        Runnable target = new MyRunnable02();</span><br><span class="line">        for (int i = 0; i &lt; 32; i++) &#123;</span><br><span class="line">   </span><br><span class="line">            new Thread(target).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/02/23/2024-H1/2024-02-23-16-02-07/"><img class="fill" src="/Hexo/gallery/defaultCover1.png" alt="Java - é”"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-02-23T16:02:07.000Z" title="2/23/2024, 4:02:07 PM">2024-02-23</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.350Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/JavaSE/">JavaSE</a></span><span class="level-item">22 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3319ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/02/23/2024-H1/2024-02-23-16-02-07/">Java - é”</a></p><div class="content"><h1 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h1><p>åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šæ•°æ®è¯»å–ã€å†™å…¥æ ¡éªŒã€æ•°æ®å†™å…¥ã€‚</p>
<p>å‡è®¾æ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šé€ æˆå†²çªï¼Œåªæœ‰åœ¨æ•°æ®è¿›è¡Œæäº¤æ›´æ–°æ—¶ï¼Œæ‰ä¼šæ­£å¼å¯¹æ•°æ®çš„å†²çªä¸å¦è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœå‘ç°å†²çªäº†ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œè®©ç”¨æˆ·å†³å®šå¦‚ä½•å»åšã€‚<code>fail-fast</code>æœºåˆ¶ã€‚</p>
<h1 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h1><p>æ­£å¦‚å…¶åï¼Œå®ƒæŒ‡å¯¹æ•°æ®è¢«å¤–ç•Œï¼ˆå¯èƒ½æ˜¯æœ¬æœºçš„å…¶ä»–äº‹åŠ¡ï¼Œä¹Ÿå¯èƒ½æ˜¯æ¥è‡ªå…¶å®ƒæœåŠ¡å™¨çš„äº‹åŠ¡å¤„ç†ï¼‰çš„ä¿®æ”¹æŒä¿å®ˆæ€åº¦ã€‚åœ¨æ•´ä¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”å®šçŠ¶æ€ã€‚æ‚²è§‚é”å¤§å¤šæ•°æƒ…å†µä¸‹ä¾é æ•°æ®åº“çš„é”æœºåˆ¶å®ç°ï¼Œä»¥ä¿è¯æ“ä½œæœ€å¤§ç¨‹åº¦çš„ç‹¬å æ€§ã€‚å¦‚æœåŠ é”çš„æ—¶é—´è¿‡é•¿ï¼Œå…¶ä»–ç”¨æˆ·é•¿æ—¶é—´æ— æ³•è®¿é—®ï¼Œå½±å“ç¨‹åºçš„å¹¶å‘è®¿é—®æ€§ï¼ŒåŒæ—¶è¿™æ ·å¯¹æ•°æ®åº“æ€§èƒ½å¼€é”€å½±å“ä¹Ÿå¾ˆå¤§ï¼Œç‰¹åˆ«æ˜¯é•¿äº‹åŠ¡è€Œè¨€ï¼Œè¿™æ ·çš„å¼€é”€å¾€å¾€æ— æ³•æ‰¿å—ã€‚</p>
<h1 id="åˆ†å¸ƒå¼é”"><a href="#åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†å¸ƒå¼é”"></a>åˆ†å¸ƒå¼é”</h1><p>åˆ†å¸ƒå¼é›†ç¾¤ä¸­ï¼Œå¯¹é”æ¥å£<code>QPS</code>æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œå•å°æœåŠ¡å™¨æ»¡è¶³ä¸äº†è¦æ±‚ï¼Œå¯ä»¥è€ƒè™‘å°†é”æœåŠ¡éƒ¨ç½²åœ¨ç‹¬ç«‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ¯”å¦‚å€ŸåŠ©åˆ†å¸ƒå¼ç¼“å­˜æ¥å®ç°ã€‚</p>
<h1 id="å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”"></a>å¯é‡å…¥é”</h1><p>å¯é‡å…¥é”ï¼Œä¹Ÿå«åšé€’å½’é”ï¼Œæ˜¯æŒ‡åœ¨åŒä¸€ä¸ªçº¿ç¨‹åœ¨è°ƒå¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œå†è¿›å…¥å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”ã€‚<code>ReentrantLock</code> å’Œ<code>synchronized</code> éƒ½æ˜¯ å¯é‡å…¥é”ã€‚å¯é‡å…¥é”çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä¸€å®šç¨‹åº¦é¿å…æ­»é”ã€‚</p>
<p>è¿™å¯¹äºè®¾è®¡å¤æ‚çš„ç¨‹åºæˆ–åº“æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ã€‚è€ƒè™‘ä¸‹é¢è¿™ç§æƒ…å†µï¼š</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class SomeClass &#123;</span><br><span class="line">   </span><br><span class="line">    private final Lock lock = new ReentrantLock();</span><br><span class="line"></span><br><span class="line">    public void methodA() &#123;</span><br><span class="line">   </span><br><span class="line">        lock.lock();</span><br><span class="line">        try &#123;</span><br><span class="line">   </span><br><span class="line">            // ä¸€äº›ä»£ç </span><br><span class="line">            methodB(); // åœ¨ methodA ä¸­è°ƒç”¨ methodB</span><br><span class="line">            // æ›´å¤šä»£ç </span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">   </span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void methodB() &#123;</span><br><span class="line">   </span><br><span class="line">        lock.lock();</span><br><span class="line">        try &#123;</span><br><span class="line">   </span><br><span class="line">            // ä¸€äº›ä»£ç </span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">   </span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>methodA()</code> å’Œ <code>methodB()</code> éƒ½ä½¿ç”¨äº†åŒä¸€æŠŠé”ã€‚å¦‚æœ <code>ReentrantLock</code> ä¸æ˜¯å¯é‡å…¥çš„ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹åœ¨ <code>methodA()</code> ä¸­å·²ç»è·å–äº†é”åï¼Œå†æ¬¡å°è¯•åœ¨ <code>methodB()</code> ä¸­è·å–é”æ—¶ï¼Œå°±ä¼šå¯¼è‡´æ­»é”ï¼Œå› ä¸ºé”å·²ç»è¢«åŒä¸€ä¸ªçº¿ç¨‹æŒæœ‰ï¼Œè€Œä¸æ˜¯å…¶ä»–çº¿ç¨‹ã€‚</p>
<p>å› æ­¤ï¼Œâ€å¯é‡å…¥â€é”å…è®¸åœ¨åŒä¸€çº¿ç¨‹ä¸­å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œè¿™æ ·å°±èƒ½é¿å…æ­»é”ï¼Œå¹¶ä¸”ç®€åŒ–äº†ç¨‹åºè®¾è®¡ï¼Œå› ä¸ºæ— éœ€æ‹…å¿ƒæ–¹æ³•ä¹‹é—´çš„è°ƒç”¨é¡ºåºæ˜¯å¦ä¼šå¯¼è‡´æ­»é”ã€‚</p>
<p>å°½ç®¡åœ¨æ‚¨æå‡ºçš„ä¾‹å­ä¸­çœ‹èµ·æ¥ä¼¼ä¹å¹¶æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œä½†åœ¨å®é™…çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œâ€å¯é‡å…¥â€é”ç¡®å®æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚</p>
<h1 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h1><p>è‡ªæ—‹é”æ˜¯ä¸€ç§åŸºäºå¿™ç­‰å¾…ï¼ˆbusy-waitingï¼‰çš„é”ï¼Œå®ƒåœ¨è·å–é”æ—¶ä¼šä¸æ–­åœ°å¾ªç¯å°è¯•è·å–é”ï¼Œè€Œä¸æ˜¯è®©çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ã€‚è‡ªæ—‹é”çš„ä¸»è¦ç‰¹ç‚¹æ˜¯åœ¨é”è¢«å…¶ä»–çº¿ç¨‹å ç”¨æ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šä¸æ–­åœ°å°è¯•è·å–é”ï¼Œç›´åˆ°è·å–åˆ°é”ä¸ºæ­¢ï¼Œè€Œä¸ä¼šé‡Šæ”¾ CPU æ§åˆ¶æƒã€‚</p>
<p>è‡ªæ—‹é”é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><p><code>é”è¢«æŒæœ‰çš„æ—¶é—´çŸ­</code>ï¼šå¦‚æœé”è¢«æŒæœ‰çš„æ—¶é—´å¾ˆçŸ­ï¼Œé‚£ä¹ˆç­‰å¾…é”çš„çº¿ç¨‹ä¸éœ€è¦è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œä½¿ç”¨è‡ªæ—‹é”å¯ä»¥é¿å…<code>çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€</code>ã€‚</p>
</li>
<li><p>å¤šæ ¸å¤„ç†å™¨ï¼šåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è‡ªæ—‹ç­‰å¾…é”çš„åŒæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤è‡ªæ—‹é”åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ CPU æ—¶é—´ï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€‚</p>
</li>
<li><p>é«˜å¹¶å‘åœºæ™¯ï¼šåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œé”çš„ç«äº‰å¯èƒ½ä¼šå¾ˆæ¿€çƒˆï¼Œè‡ªæ—‹é”å¯ä»¥å‡å°‘çº¿ç¨‹çš„é˜»å¡æ—¶é—´ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚</p>
</li>
</ol>
<p>ç„¶è€Œï¼Œè‡ªæ—‹é”ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼š</p>
<ol>
<li><p>ç­‰å¾…æ—¶é—´è¿‡é•¿å¯èƒ½ä¼šæµªè´¹ CPU èµ„æºï¼šå¦‚æœé”çš„ç«äº‰å¾ˆæ¿€çƒˆï¼Œå¯¼è‡´çº¿ç¨‹ä¸æ–­è‡ªæ—‹ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œå¯èƒ½ä¼šæµªè´¹å¤§é‡çš„ CPU æ—¶é—´ã€‚</p>
</li>
<li><p>ä¸é€‚ç”¨äºé•¿æ—¶é—´æŒæœ‰é”çš„æƒ…å†µï¼šå¦‚æœé”è¢«æŒæœ‰çš„æ—¶é—´è¾ƒé•¿ï¼Œè‡ªæ—‹é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹é•¿æ—¶é—´ç­‰å¾…ï¼Œå½±å“ç³»ç»Ÿçš„å“åº”æ€§èƒ½ã€‚</p>
</li>
</ol>
<p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨è‡ªæ—‹é”æ—¶éœ€è¦æƒè¡¡åˆ©å¼Šï¼Œæ ¹æ®å…·ä½“çš„åœºæ™¯æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è‡ªæ—‹é”ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè‡ªæ—‹é”é€‚ç”¨äºé”è¢«æŒæœ‰æ—¶é—´çŸ­ã€é”çš„ç«äº‰ä¸æ¿€çƒˆçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæé«˜å¹¶å‘æ€§èƒ½ã€‚</p>
<p>å½“ç„¶å¯ä»¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨è‡ªæ—‹é”æ¥ä¿æŠ¤ä¸€ä¸ªå…±äº«èµ„æºï¼š</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.atomic.AtomicBoolean;</span><br><span class="line"></span><br><span class="line">public class SpinLock &#123;</span><br><span class="line">   </span><br><span class="line">    private AtomicBoolean locked = new AtomicBoolean(false);</span><br><span class="line"></span><br><span class="line">    public void lock() &#123;</span><br><span class="line">   </span><br><span class="line">        // ä¸æ–­å°è¯•è·å–é”ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢</span><br><span class="line">        while (!locked.compareAndSet(false, true)) &#123;</span><br><span class="line">   </span><br><span class="line">            // è‡ªæ—‹ç­‰å¾…ï¼Œä¸åšå…¶ä»–äº‹æƒ…ï¼ŒæŒç»­å°è¯•è·å–é”</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void unlock() &#123;</span><br><span class="line">   </span><br><span class="line">        // é‡Šæ”¾é”</span><br><span class="line">        locked.set(false);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>SpinLock</code> ç±»å®ç°äº†ä¸€ä¸ªè‡ªæ—‹é”ã€‚<code>AtomicBoolean</code> ç±»è¢«ç”¨ä½œé”çŠ¶æ€çš„æ ‡è®°ï¼Œåˆå§‹æ—¶ä¸º <code>false</code> è¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚<code>lock()</code> æ–¹æ³•ä½¿ç”¨äº†è‡ªæ—‹ç­‰å¾…çš„æ–¹å¼æ¥å°è¯•è·å–é”ï¼Œå®ƒä¼šä¸æ–­åœ°å°è¯•å°† <code>locked</code> çš„å€¼ä» <code>false</code> è®¾ç½®ä¸º <code>true</code>ï¼Œç›´åˆ°æˆåŠŸè·å–åˆ°é”ä¸ºæ­¢ã€‚åœ¨ <code>unlock()</code> æ–¹æ³•ä¸­ï¼Œé”ä¼šè¢«é‡Šæ”¾ï¼Œå°† <code>locked</code> çš„å€¼é‡æ–°è®¾ç½®ä¸º <code>false</code>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>SpinLock</code> çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class SpinLockExample &#123;</span><br><span class="line">   </span><br><span class="line">    private static int counter = 0;</span><br><span class="line">    private static SpinLock spinLock = new SpinLock();</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">   </span><br><span class="line">        Thread t1 = new Thread(() -&gt; &#123;</span><br><span class="line">   </span><br><span class="line">            for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">   </span><br><span class="line">                spinLock.lock();</span><br><span class="line">                counter++;</span><br><span class="line">                spinLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread t2 = new Thread(() -&gt; &#123;</span><br><span class="line">   </span><br><span class="line">            for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">   </span><br><span class="line">                spinLock.lock();</span><br><span class="line">                counter++;</span><br><span class="line">                spinLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;Counter: &quot; + counter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªçº¿ç¨‹ <code>t1</code> å’Œ <code>t2</code> åˆ†åˆ«å¯¹ <code>counter</code> æ‰§è¡Œäº† 1000 æ¬¡å¢åŠ æ“ä½œï¼Œæ¯æ¬¡å¢åŠ æ“ä½œéƒ½åœ¨è·å–è‡ªæ—‹é”åæ‰§è¡Œï¼Œå¹¶åœ¨æ‰§è¡Œå®Œæ¯•åé‡Šæ”¾è‡ªæ—‹é”ã€‚æœ€åè¾“å‡º <code>counter</code> çš„å€¼ï¼Œç”±äºè‡ªæ—‹é”çš„ä¿æŠ¤ï¼Œ<code>counter</code> çš„å¢åŠ æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<h1 id="ç‹¬äº«é”"><a href="#ç‹¬äº«é”" class="headerlink" title="ç‹¬äº«é”"></a>ç‹¬äº«é”</h1><p>ç‹¬äº«é”æ˜¯æŒ‡è¯¥é”ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚</p>
<h1 id="å…±äº«é”"><a href="#å…±äº«é”" class="headerlink" title="å…±äº«é”"></a>å…±äº«é”</h1><p>å…±äº«é”æ˜¯æŒ‡è¯¥é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚<code>ReentrantReadWriteLock</code>ï¼Œå…¶è¯»é”æ˜¯å…±äº«é”ï¼Œå…¶å†™é”æ˜¯ç‹¬äº«é”ã€‚è¯»é”çš„å…±äº«é”å¯ä¿è¯å¹¶å‘è¯»æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œè¯»å†™ã€å†™è¯»ã€å†™å†™çš„è¿‡ç¨‹æ˜¯äº’æ–¥çš„ã€‚ç‹¬äº«é”ä¸å…±äº«é”ä¹Ÿæ˜¯é€šè¿‡<code>AQS</code>ï¼ˆ<code>AbstractQueuedSynchronizer</code>ï¼‰æ¥å®ç°çš„ï¼Œé€šè¿‡å®ç°ä¸åŒçš„æ–¹æ³•ï¼Œæ¥å®ç°ç‹¬äº«æˆ–è€…å…±äº«ã€‚</p>
<h1 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h1><p>ç‹¬äº«é”&#x2F;å…±äº«é”å°±æ˜¯ä¸€ç§å¹¿ä¹‰çš„è¯´æ³•ï¼Œäº’æ–¥é”&#x2F;è¯»å†™é”æŒ‡å…·ä½“çš„å®ç°ã€‚</p>
<h1 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h1><p>è¯»å†™é”åœ¨<code>Java</code>ä¸­çš„å…·ä½“å®ç°å°±æ˜¯<code>ReentrantReadWriteLock</code></p>
<h1 id="é˜»å¡é”"><a href="#é˜»å¡é”" class="headerlink" title="é˜»å¡é”"></a>é˜»å¡é”</h1><p>é˜»å¡é”ï¼Œå¯ä»¥è¯´æ˜¯è®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€è¿›è¡Œç­‰å¾…ï¼Œå½“è·å¾—ç›¸åº”çš„ä¿¡å·ï¼ˆå”¤é†’ï¼Œæ—¶é—´ï¼‰ æ—¶ï¼Œæ‰å¯ä»¥è¿›å…¥çº¿ç¨‹çš„å‡†å¤‡å°±ç»ªçŠ¶æ€ï¼Œå‡†å¤‡å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œé€šè¿‡ç«äº‰è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</p>
<p>JAVAä¸­ï¼Œèƒ½å¤Ÿè¿›å…¥\é€€å‡ºã€é˜»å¡çŠ¶æ€æˆ–åŒ…å«é˜»å¡é”çš„æ–¹æ³•æœ‰ ï¼Œsynchronized å…³é”®å­—ï¼ˆå…¶ä¸­çš„é‡é‡é”ï¼‰ï¼ŒReentrantLockï¼ŒObject.wait()&#x2F;notify()ï¼ŒLockSupport.park()&#x2F;unpark()</p>
<h1 id="å…¬å¹³é”"><a href="#å…¬å¹³é”" class="headerlink" title="å…¬å¹³é”"></a>å…¬å¹³é”</h1><p>å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”</p>
<h1 id="éå…¬å¹³é”"><a href="#éå…¬å¹³é”" class="headerlink" title="éå…¬å¹³é”"></a>éå…¬å¹³é”</h1><p>éå…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è·å–é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹æ¯”å…ˆç”³è¯·çš„çº¿ç¨‹ä¼˜å…ˆè·å–é”ã€‚</p>
<p>å¯èƒ½é€ æˆä¼˜å…ˆçº§åè½¬æˆ–è€…é¥¥é¥¿ç°è±¡ã€‚å¯¹äº<code>Java ReentrantLock</code>è€Œè¨€ï¼Œé€šè¿‡æ„é€ å‡½æ•° ReentrantLock(boolean fair) æŒ‡å®šè¯¥é”æ˜¯å¦æ˜¯å…¬å¹³é”ï¼Œé»˜è®¤æ˜¯éå…¬å¹³é”ã€‚</p>
<p>éå…¬å¹³é”çš„ä¼˜ç‚¹åœ¨äºååé‡æ¯”å…¬å¹³é”å¤§ã€‚å¯¹äº<code>Synchronized</code>è€Œè¨€ï¼Œä¹Ÿæ˜¯ä¸€ç§éå…¬å¹³é”ã€‚</p>
<h1 id="åˆ†æ®µé”"><a href="#åˆ†æ®µé”" class="headerlink" title="åˆ†æ®µé”"></a>åˆ†æ®µé”</h1><p>åˆ†æ®µé”å…¶å®æ˜¯ä¸€ç§é”çš„è®¾è®¡ï¼Œç›®çš„æ˜¯ç»†åŒ–é”çš„ç²’åº¦ï¼Œå¹¶ä¸æ˜¯å…·ä½“çš„ä¸€ç§é”ï¼Œå¯¹äº<code>ConcurrentHashMap</code>è€Œè¨€ï¼Œå…¶å¹¶å‘çš„å®ç°å°±æ˜¯é€šè¿‡åˆ†æ®µé”çš„å½¢å¼æ¥å®ç°é«˜æ•ˆçš„å¹¶å‘æ“ä½œã€‚</p>
<p><code>ConcurrentHashMap</code>ä¸­çš„åˆ†æ®µé”ç§°ä¸º<code>Segment</code>ï¼Œå®ƒå³ç±»ä¼¼äº<code>HashMap</code>ï¼ˆ<code>JDK7</code> ä¸­<code>HashMap</code>çš„å®ç°ï¼‰çš„ç»“æ„ï¼Œå³å†…éƒ¨æ‹¥æœ‰ä¸€ä¸ª<code>Entry</code>æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼›åŒæ—¶åˆæ˜¯ä¸€ä¸ª<code>ReentrantLock</code>ï¼ˆ<code>Segment</code>ç»§æ‰¿äº†<code>ReentrantLock)</code>ã€‚</p>
<p>å½“éœ€è¦<code>put</code>å…ƒç´ çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯å¯¹æ•´ä¸ª<code>HashMap</code>åŠ é”ï¼Œè€Œæ˜¯å…ˆé€šè¿‡<code>hashcode</code>çŸ¥é“è¦æ”¾åœ¨å“ªä¸€ä¸ªåˆ†æ®µä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªåˆ†æ®µåŠ é”ï¼Œæ‰€ä»¥å½“å¤šçº¿ç¨‹putæ—¶ï¼Œåªè¦ä¸æ˜¯æ”¾åœ¨åŒä¸€ä¸ªåˆ†æ®µä¸­ï¼Œå¯æ”¯æŒå¹¶è¡Œæ’å…¥ã€‚</p>
<h1 id="å¯¹è±¡é”"><a href="#å¯¹è±¡é”" class="headerlink" title="å¯¹è±¡é”"></a>å¯¹è±¡é”</h1><p>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤šæ¬¡å¯¹åŒä¸€ä¸ªå¯¹è±¡ä¸Šé”ã€‚å¯¹äºæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>java</code>è™šæ‹Ÿæœºç»´æŠ¤ä¸€ä¸ªåŠ é”è®¡æ•°å™¨ï¼Œçº¿ç¨‹æ¯è·å¾—ä¸€æ¬¡è¯¥å¯¹è±¡ï¼Œè®¡æ•°å™¨å°±åŠ <code>1</code>ï¼Œæ¯é‡Šæ”¾ä¸€æ¬¡ï¼Œè®¡æ•°å™¨å°±å‡ <code>1</code>ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º<code>0</code>æ—¶ï¼Œé”å°±è¢«å®Œå…¨é‡Šæ”¾äº†ã€‚</p>
<p><code>synchronized</code>ä¿®é¥°éé™æ€æ–¹æ³•ã€åŒæ­¥ä»£ç å—çš„<code>synchronized (this)</code>ã€<code>synchronized</code> (é<code>this</code>å¯¹è±¡)ï¼Œé”çš„æ˜¯å¯¹è±¡ï¼Œçº¿ç¨‹æƒ³è¦æ‰§è¡Œå¯¹åº”åŒæ­¥ä»£ç ï¼Œéœ€è¦è·å¾—å¯¹è±¡é”ã€‚</p>
<p><code>ä½¿ç”¨ synchronized åŠ é” this æ—¶ï¼Œåªæœ‰åŒä¸€ä¸ªå¯¹è±¡ä¼šä½¿ç”¨åŒä¸€æŠŠé”ï¼Œä¸åŒå¯¹è±¡ä¹‹é—´çš„é”æ˜¯ä¸åŒçš„</code>ã€‚ â€‹</p>
<p>å½“éœ€è¦åŒæ­¥è®¿é—®å¯¹è±¡çš„å®ä¾‹æ–¹æ³•æˆ–å®ä¾‹å˜é‡æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ this ä½œä¸º synchronized çš„å‚æ•°ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¤šä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è®¿é—®å¯¹è±¡çš„å®ä¾‹æ–¹æ³•æˆ–å®ä¾‹å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ synchronized(this) æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void synchronizedBlock() &#123;</span><br><span class="line">   </span><br><span class="line">    synchronized (this) &#123;</span><br><span class="line">   </span><br><span class="line">        // åŒæ­¥ä»£ç å—</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ç±»é”"><a href="#ç±»é”" class="headerlink" title="ç±»é”"></a>ç±»é”</h1><p><code>synchronized</code>ä¿®é¥°é™æ€æ–¹æ³•æˆ–è€…åŒæ­¥ä»£ç å—çš„<code>synchronized</code> (ç±».<code>class)</code>ï¼Œçº¿ç¨‹æƒ³è¦æ‰§è¡Œå¯¹åº”åŒæ­¥ä»£ç ï¼Œéœ€è¦è·å¾—ç±»é”ã€‚<br><code>ä½¿ç”¨ synchronized åŠ é” class æ—¶ï¼Œæ— è®ºå…±äº«ä¸€ä¸ªå¯¹è±¡è¿˜æ˜¯åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œå®ƒä»¬ç”¨çš„éƒ½æ˜¯åŒä¸€æŠŠé”</code>ã€‚<br>å½“éœ€è¦åŒæ­¥è®¿é—®ç±»çš„é™æ€æ–¹æ³•æˆ–é™æ€å˜é‡æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ MyClass.class ä½œä¸º synchronized çš„å‚æ•°ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¤šä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è®¿é—®ç±»çš„é™æ€æ–¹æ³•æˆ–é™æ€å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ synchronized(MyClass.class) æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</p>
<figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void synchronizedStaticBlock() &#123;</span><br><span class="line">   </span><br><span class="line">    synchronized (MyClass.class) &#123;</span><br><span class="line">   </span><br><span class="line">        // åŒæ­¥ä»£ç å—</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é”å‡çº§"><a href="#é”å‡çº§" class="headerlink" title="é”å‡çº§"></a>é”å‡çº§</h1><p>é”å‡çº§æ˜¯Javaè™šæ‹Ÿæœºä¸­çš„ä¸€ç§<code>ä¼˜åŒ–ç­–ç•¥</code>ï¼Œå®ƒæ˜¯é’ˆå¯¹ synchronized å…³é”®å­—è¿›è¡Œçš„ä¼˜åŒ–ï¼Œ<code>å¹¶ä¸æ˜¯åƒ ReentrantLock è¿™æ ·çš„é”ç±»åº“ï¼Œå¯ä»¥åœ¨ä»£ç é€»è¾‘ä¸­ç›´æ¥ä½¿ç”¨çš„é”ã€‚</code></p>
<p>ï¼ˆæ— é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ï¼‰æ˜¯æŒ‡åœ¨Javaè™šæ‹Ÿæœºä¸­å¯¹é”çš„çŠ¶æ€è¿›è¡Œä¼˜åŒ–å’Œè°ƒæ•´çš„è¿‡ç¨‹ã€‚è¿™äº›çŠ¶æ€åæ˜ äº†å¯¹è±¡çš„é”å®šçŠ¶æ€ä»¥åŠé”çš„ç«äº‰æƒ…å†µã€‚è¿™ç§é”å‡çº§çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨ä¸åŒæƒ…å†µä¸‹æä¾›ä¸åŒçš„é”å®šæœºåˆ¶ï¼Œä»¥å‡å°‘é”çš„ç«äº‰ã€æé«˜æ€§èƒ½ã€‚</p>
<p>ä¸‹é¢æ˜¯å¯¹è¿™å‡ ç§é”çŠ¶æ€çš„ç®€è¦ä»‹ç»ï¼š</p>
<ol>
<li><p><strong>æ— é”çŠ¶æ€</strong>ï¼š</p>
<ul>
<li>å½“çº¿ç¨‹å°è¯•è·å–é”æ—¶ï¼Œå¯¹è±¡çš„é”çŠ¶æ€ä¸ºæ— é”çŠ¶æ€ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡æ²¡æœ‰è¢«ä»»ä½•çº¿ç¨‹é”å®šã€‚</li>
<li>åœ¨æ— é”çŠ¶æ€ä¸‹ï¼Œçº¿ç¨‹ä¼šé€šè¿‡CASï¼ˆCompare and Swapï¼‰ç­‰åŸå­æ“ä½œå°è¯•ç›´æ¥ä¿®æ”¹å¯¹è±¡çš„æŒ‡é’ˆæˆ–æ ‡è®°ä½ï¼Œæ¥å°è¯•è·å–é”ã€‚</li>
</ul>
</li>
<li><p><strong>åå‘é”</strong>ï¼š</p>
<ul>
<li>å½“åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥å—æ—¶ï¼Œå¯¹è±¡çš„é”çŠ¶æ€ä¼šå‡çº§ä¸ºåå‘é”çŠ¶æ€ã€‚</li>
<li>åå‘é”ä¼šå°†çº¿ç¨‹çš„IDè®°å½•åœ¨å¯¹è±¡å¤´ä¸­ï¼Œè¡¨ç¤ºè¯¥çº¿ç¨‹æ‹¥æœ‰å¯¹è±¡çš„åå‘é”ã€‚å½“å…¶ä»–çº¿ç¨‹å°è¯•è·å–é”æ—¶ï¼Œä¼šæ£€æŸ¥åå‘é”çš„çº¿ç¨‹IDæ˜¯å¦ä¸å½“å‰çº¿ç¨‹IDç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™è¡¨ç¤ºè·å–æˆåŠŸã€‚</li>
</ul>
</li>
<li><p><strong>è½»é‡çº§é”</strong>ï¼š</p>
<ul>
<li>å½“æœ‰å¤šä¸ªçº¿ç¨‹ç«äº‰åŒæ­¥å—æ—¶ï¼Œå¯¹è±¡çš„é”çŠ¶æ€ä¼šå‡çº§ä¸ºè½»é‡çº§é”çŠ¶æ€ã€‚</li>
<li>è½»é‡çº§é”ä½¿ç”¨CASæ“ä½œæ¥é¿å…ä¼ ç»Ÿçš„äº’æ–¥é‡æ“ä½œï¼Œå°è¯•åœ¨ç”¨æˆ·æ€ä¸‹é€šè¿‡è‡ªæ—‹æ¥è·å–é”ã€‚å¦‚æœè‡ªæ—‹è·å–é”å¤±è´¥ï¼Œåˆ™å‡çº§ä¸ºé‡é‡çº§é”ã€‚</li>
</ul>
</li>
<li><p><strong>é‡é‡çº§é”</strong>ï¼š</p>
<ul>
<li>å½“è½»é‡çº§é”ç«äº‰å¤±è´¥æ—¶ï¼Œå¯¹è±¡çš„é”çŠ¶æ€ä¼šå‡çº§ä¸ºé‡é‡çº§é”çŠ¶æ€ã€‚</li>
<li>é‡é‡çº§é”ä¼šä½¿å¾—ç«äº‰å¤±è´¥çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä»è€Œè®©å‡ºCPUèµ„æºï¼Œå‡å°‘ç«äº‰ã€‚</li>
</ul>
</li>
</ol>
<p>é”å‡çº§æ˜¯Javaè™šæ‹Ÿæœºå¯¹é”çŠ¶æ€çš„åŠ¨æ€è°ƒæ•´è¿‡ç¨‹ï¼Œæ—¨åœ¨æ ¹æ®å®é™…çš„é”ç«äº‰æƒ…å†µå’Œçº¿ç¨‹è¡Œä¸ºæ¥é€‰æ‹©æœ€é€‚åˆçš„é”ç­–ç•¥ï¼Œä»¥æé«˜ç¨‹åºçš„å¹¶å‘æ€§èƒ½ã€‚</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/Hexo/2024/02/21/2024-H1/2024-02-21-17-47-18/"><img class="fill" src="/Hexo/2024/02/21/2024-H1/2024-02-21-17-47-18/1718889285035.png" alt="Redisä¹‹ç¼“å­˜å‡»ç©¿é—®é¢˜è§£å†³æ–¹æ¡ˆ"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-02-21T17:47:18.000Z" title="2/21/2024, 5:47:18 PM">2024-02-21</time>å‘è¡¨</span><span class="level-item"><time dateTime="2024-08-11T07:21:48.350Z" title="8/11/2024, 7:21:48 AM">2024-08-11</time>æ›´æ–°</span><span class="level-item"> Xiamu </span><span class="level-item"><a class="link-muted" href="/Hexo/categories/SpringCloud/">SpringCloud</a><span>Â /Â </span><a class="link-muted" href="/Hexo/categories/SpringCloud/Redis/">Redis</a></span><span class="level-item">2 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦291ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Hexo/2024/02/21/2024-H1/2024-02-21-17-47-18/">Redisä¹‹ç¼“å­˜å‡»ç©¿é—®é¢˜è§£å†³æ–¹æ¡ˆ</a></p><div class="content"><h1 id="ä¸€ã€ä¹¦æ¥ä¸Šæ–‡"><a href="#ä¸€ã€ä¹¦æ¥ä¸Šæ–‡" class="headerlink" title="ä¸€ã€ä¹¦æ¥ä¸Šæ–‡"></a>ä¸€ã€ä¹¦æ¥ä¸Šæ–‡</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_51390969/article/details/136214022?spm=1001.2014.3001.5502">Redisä¹‹ç¼“å­˜é›ªå´©é—®é¢˜è§£å†³æ–¹æ¡ˆ</a></p>
<h1 id="äºŒã€ä»‹ç»"><a href="#äºŒã€ä»‹ç»" class="headerlink" title="äºŒã€ä»‹ç»"></a>äºŒã€ä»‹ç»</h1><p>ç¼“å­˜å‡»ç©¿å°±æ˜¯å¤§é‡å¹¶å‘è®¿é—®åŒä¸€ä¸ªçƒ­ç‚¹æ•°æ®ï¼Œä¸€æ—¦è¿™ä¸ªçƒ­ç‚¹æ•°æ®ç¼“å­˜å¤±æ•ˆï¼Œåˆ™è¯·æ±‚å‹åŠ›éƒ½æ¥åˆ°æ•°æ®åº“ã€‚</p>
<h1 id="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"><a href="#ä¸‰ã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"></a>ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h1><h2 id="1-å•ä¾‹åŒæ£€é”"><a href="#1-å•ä¾‹åŒæ£€é”" class="headerlink" title="1. å•ä¾‹åŒæ£€é”"></a>1. å•ä¾‹åŒæ£€é”</h2><figure class="highlight plaintext"><figcaption><span>language-java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">   public CoursePublish getCoursePublishCache(Long courseId) &#123;</span><br><span class="line">  </span><br><span class="line">       String key = &quot;content:course:publish:&quot; + courseId;</span><br><span class="line">       //å¸ƒéš†è¿‡æ»¤å™¨</span><br><span class="line">       boolean contains = bloomFilter.contains(key);</span><br><span class="line">       if (!contains)&#123;</span><br><span class="line">  </span><br><span class="line">           return null;</span><br><span class="line">       &#125;</span><br><span class="line">       //å…ˆæŸ¥è¯¢redis</span><br><span class="line">       Object object = redisTemplate.opsForValue().get(key);</span><br><span class="line">       if (object != null)&#123;</span><br><span class="line">  </span><br><span class="line">           String string = object.toString();</span><br><span class="line">           CoursePublish coursePublish = JSON.parseObject(string, CoursePublish.class);</span><br><span class="line">           return coursePublish;</span><br><span class="line">       &#125;else &#123;</span><br><span class="line">  </span><br><span class="line">           //åæŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">           //åŠ é”ï¼Œé˜²æ­¢ç¼“å­˜å‡»ç©¿</span><br><span class="line">           synchronized (this)&#123;</span><br><span class="line">  </span><br><span class="line">               //å•ä¾‹åŒæ£€é”</span><br><span class="line">               object = redisTemplate.opsForValue().get(key);</span><br><span class="line">               if (object != null)&#123;</span><br><span class="line">  </span><br><span class="line">                   String string = object.toString();</span><br><span class="line">                   CoursePublish coursePublish = JSON.parseObject(string, CoursePublish.class);</span><br><span class="line">                   return coursePublish;</span><br><span class="line">               &#125;</span><br><span class="line">               CoursePublish coursePublish = getCoursePublish(courseId);</span><br><span class="line">               if (coursePublish != null) &#123;</span><br><span class="line">  </span><br><span class="line">               	bloomFilter.add(key);</span><br><span class="line">                   redisTemplate.opsForValue().set(key, JSON.toJSONString(coursePublish));</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">  </span><br><span class="line">                   int timeout = 10 + new Random().nextInt(20);</span><br><span class="line">                   redisTemplate.opsForValue().set(key, JSON.toJSONString(coursePublish), timeout, TimeUnit.SECONDS);</span><br><span class="line">               &#125;</span><br><span class="line">               return coursePublish;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-ç¼“å­˜é¢„çƒ­å’Œå®šæ—¶ä»»åŠ¡"><a href="#2-ç¼“å­˜é¢„çƒ­å’Œå®šæ—¶ä»»åŠ¡" class="headerlink" title="2. ç¼“å­˜é¢„çƒ­å’Œå®šæ—¶ä»»åŠ¡"></a>2. ç¼“å­˜é¢„çƒ­å’Œå®šæ—¶ä»»åŠ¡</h2><p>ä½¿ç”¨ç¼“å­˜é¢„çƒ­ï¼ŒæŠŠæ•°æ®æå‰æ”¾å…¥ç¼“å­˜ï¼Œç„¶åæ ¹æ®è¿‡æœŸæ—¶é—´ï¼Œå‘å¸ƒåˆç†çš„å®šæ—¶ä»»åŠ¡ï¼Œä¸»åŠ¨å»æ›´æ–°ç¼“å­˜ï¼Œè®©çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€‚</p>
<img src="/Hexo/2024/02/21/2024-H1/2024-02-21-17-47-18/1718889285035.png" class="" title="This is an example image">

</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/Hexo/page/3/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/Hexo/page/5/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/Hexo/">1</a></li><li><a class="pagination-link" href="/Hexo/page/2/">2</a></li><li><a class="pagination-link" href="/Hexo/page/3/">3</a></li><li><a class="pagination-link is-current" href="/Hexo/page/4/">4</a></li><li><a class="pagination-link" href="/Hexo/page/5/">5</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/Hexo/page/12/">12</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/Hexo/img/avatar.png" alt="Xiamu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Xiamu</p><p class="is-size-6 is-block">IT Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth, Solar System</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/Hexo/archives"><p class="title">120</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/Hexo/categories"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/Hexo/tags"><p class="title">98</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Xiamu-ssr" target="_blank" rel="me noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/Xiamu-ssr"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/Hexo/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="/Hexo/categories/Front-End/"><span class="level-start"><span class="level-item">Front-End</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul><li><a class="level is-mobile" href="/Hexo/categories/Front-End/Nginx/"><span class="level-start"><span class="level-item">Nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/Front-End/Vue/"><span class="level-start"><span class="level-item">Vue</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li></ul></li><li><a class="level is-mobile" href="/Hexo/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/JavaSE/"><span class="level-start"><span class="level-item">JavaSE</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot2/"><span class="level-start"><span class="level-item">SpringBoot2</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot3/"><span class="level-start"><span class="level-item">SpringBoot3</span></span><span class="level-end"><span class="level-item tag">20</span></span></a><ul><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot3/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot3/MyBatisPlus/"><span class="level-start"><span class="level-item">MyBatisPlus</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot3/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringBoot3/OpenAPI3/"><span class="level-start"><span class="level-item">OpenAPI3</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">55</span></span></a><ul><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Elasticsearch/"><span class="level-start"><span class="level-item">Elasticsearch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Gateway/"><span class="level-start"><span class="level-item">Gateway</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Kafka/"><span class="level-start"><span class="level-item">Kafka</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Minio/"><span class="level-start"><span class="level-item">Minio</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Nacos/"><span class="level-start"><span class="level-item">Nacos</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/OpenFeign/"><span class="level-start"><span class="level-item">OpenFeign</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/RabbitMQ/"><span class="level-start"><span class="level-item">RabbitMQ</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/RuoYi-Cloud-Plus/"><span class="level-start"><span class="level-item">RuoYi-Cloud-Plus</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/Seata/"><span class="level-start"><span class="level-item">Seata</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/xxl-job/"><span class="level-start"><span class="level-item">xxl-job</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98%E6%9E%B6%E6%9E%84/"><span class="level-start"><span class="level-item">å¤šçº§ç¼“å­˜æ¶æ„</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/%E6%94%AF%E4%BB%98/"><span class="level-start"><span class="level-item">æ”¯ä»˜</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/SpringCloud/%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83/"><span class="level-start"><span class="level-item">è®¤è¯æˆæƒ</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/Hexo/categories/Utils/"><span class="level-start"><span class="level-item">Utils</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/%E5%85%B6%E4%BB%96/"><span class="level-start"><span class="level-item">å…¶ä»–</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"><span class="level-start"><span class="level-item">å¤§æ•°æ®</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"><span class="level-start"><span class="level-item">æœªåˆ†ç±»</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/Hexo/tags/Consumer/"><span class="tag">Consumer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/JWT/"><span class="tag">JWT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/Kafka/"><span class="tag">Kafka</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/Nginx/"><span class="tag">Nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/OAuth2-1/"><span class="tag">OAuth2.1</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/RSA/"><span class="tag">RSA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/Spring-Security/"><span class="tag">Spring Security</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/SpringBoot/"><span class="tag">SpringBoot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/Vue3/"><span class="tag">Vue3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/ambari/"><span class="tag">ambari</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/c/"><span class="tag">c++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/css3/"><span class="tag">css3</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/docker/"><span class="tag">docker</span><span class="tag">29</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/echarts/"><span class="tag">echarts</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/ecmascript/"><span class="tag">ecmascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/elasticsearch/"><span class="tag">elasticsearch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/excel/"><span class="tag">excel</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/gateway/"><span class="tag">gateway</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/github/"><span class="tag">github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/hadoop/"><span class="tag">hadoop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/hdfs/"><span class="tag">hdfs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/hexo/"><span class="tag">hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/intellij-idea/"><span class="tag">intellij-idea</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/java/"><span class="tag">java</span><span class="tag">25</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/javascript/"><span class="tag">javascript</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/jenkins/"><span class="tag">jenkins</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/jvm/"><span class="tag">jvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/kafka/"><span class="tag">kafka</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/linux/"><span class="tag">linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/md/"><span class="tag">md</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/mybatis/"><span class="tag">mybatis</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/mysql/"><span class="tag">mysql</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/nginx/"><span class="tag">nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/openresty/"><span class="tag">openresty</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/postman/"><span class="tag">postman</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/rabbitmq/"><span class="tag">rabbitmq</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/redis/"><span class="tag">redis</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/restful/"><span class="tag">restful</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/ruby/"><span class="tag">ruby</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/ruoyi/"><span class="tag">ruoyi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/spring/"><span class="tag">spring</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/spring-boot/"><span class="tag">spring boot</span><span class="tag">21</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/spring-cloud/"><span class="tag">spring cloud</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/spring-security/"><span class="tag">spring security</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/springamqp/"><span class="tag">springamqp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/springboot/"><span class="tag">springboot</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/springcloud/"><span class="tag">springcloud</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/typescript/"><span class="tag">typescript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/vue/"><span class="tag">vue</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/vue-js/"><span class="tag">vue.js</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/web/"><span class="tag">web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/web%E5%AE%89%E5%85%A8/"><span class="tag">webå®‰å…¨</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/windows/"><span class="tag">windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/word/"><span class="tag">word</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/zookeeper/"><span class="tag">zookeeper</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"><span class="tag">ä¸ªäººåšå®¢</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E4%BA%8B%E5%8A%A1/"><span class="tag">äº‹åŠ¡</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%88%86%E5%8C%BA/"><span class="tag">åˆ†åŒº</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="tag">åˆ†å¸ƒå¼</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><span class="tag">åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">å‰ç«¯</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"><span class="tag">å•ä¾‹æ¨¡å¼</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">åšå®¢</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%8F%8C%E6%A3%80%E9%94%81/"><span class="tag">åŒæ£€é”</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"><span class="tag">åå‘ä»£ç†</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%90%8E%E7%AB%AF/"><span class="tag">åç«¯</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"><span class="tag">å¤§æ•°æ®</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%AD%98%E5%82%A8/"><span class="tag">å­˜å‚¨</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%AE%B9%E5%99%A8/"><span class="tag">å®¹å™¨</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%B9%82%E7%AD%89/"><span class="tag">å¹‚ç­‰</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"><span class="tag">å¼€å‘è¯­è¨€</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><span class="tag">å¾®æœåŠ¡</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%8B%A6%E6%88%AA%E5%99%A8/"><span class="tag">æ‹¦æˆªå™¨</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"><span class="tag">æ’åºç®—æ³•</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%94%AF%E4%BB%98/"><span class="tag">æ”¯ä»˜</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%94%AF%E4%BB%98%E5%AE%9D/"><span class="tag">æ”¯ä»˜å®</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">æ•°æ®åº“</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><span class="tag">æ–‡ä»¶ç³»ç»Ÿ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="tag">æœåŠ¡å™¨</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%9C%AA%E5%88%86%E7%B1%BB/"><span class="tag">æœªåˆ†ç±»</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%9E%9A%E4%B8%BE%E5%8D%95%E4%BE%8B/"><span class="tag">æšä¸¾å•ä¾‹</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%9E%B6%E6%9E%84/"><span class="tag">æ¶æ„</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><span class="tag">æ­£åˆ™è¡¨è¾¾å¼</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E6%B6%88%E8%B4%B9%E8%80%85/"><span class="tag">æ¶ˆè´¹è€…</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E7%88%AC%E8%99%AB/"><span class="tag">çˆ¬è™«</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E7%94%9F%E4%BA%A7%E8%80%85/"><span class="tag">ç”Ÿäº§è€…</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E7%BC%93%E5%AD%98/"><span class="tag">ç¼“å­˜</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E7%BD%91%E7%AB%99/"><span class="tag">ç½‘ç«™</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E8%A7%86%E9%A2%91/"><span class="tag">è§†é¢‘</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">è®¾è®¡æ¨¡å¼</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"><span class="tag">è´Ÿè½½å‡è¡¡</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E8%BF%90%E7%BB%B4/"><span class="tag">è¿ç»´</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E9%87%8D%E6%9E%84/"><span class="tag">é‡æ„</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E9%94%81/"><span class="tag">é”</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Hexo/tags/%E9%9B%86%E7%BE%A4/"><span class="tag">é›†ç¾¤</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><figure class="media-left"><a class="image" href="/Hexo/2024/07/31/2024-H2/2024-07-31-18-11-56/"><img src="/Hexo/gallery/defaultThumbnail4.png" alt="Kafka æ›´å¤šå»¶ä¼¸è®¨è®º"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-07-31T18:11:58.000Z">2024-07-31</time></p><p class="title"><a href="/Hexo/2024/07/31/2024-H2/2024-07-31-18-11-56/">Kafka æ›´å¤šå»¶ä¼¸è®¨è®º</a></p><p class="categories"><a href="/Hexo/categories/SpringCloud/">SpringCloud</a> / <a href="/Hexo/categories/SpringCloud/Kafka/">Kafka</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Hexo/2024/07/30/2024-H2/2024-07-30-18-58-27/"><img src="/Hexo/gallery/defaultThumbnail1.png" alt="Kafka Consumer"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-07-30T18:58:30.000Z">2024-07-30</time></p><p class="title"><a href="/Hexo/2024/07/30/2024-H2/2024-07-30-18-58-27/">Kafka Consumer</a></p><p class="categories"><a href="/Hexo/categories/SpringCloud/">SpringCloud</a> / <a href="/Hexo/categories/SpringCloud/Kafka/">Kafka</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Hexo/2024/07/20/2024-H2/2024-07-20-19-59-46/"><img src="/Hexo/gallery/defaultThumbnail2.png" alt="Kafkaä¹‹å­˜å‚¨è®¾è®¡"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-07-20T19:59:49.000Z">2024-07-20</time></p><p class="title"><a href="/Hexo/2024/07/20/2024-H2/2024-07-20-19-59-46/">Kafkaä¹‹å­˜å‚¨è®¾è®¡</a></p><p class="categories"><a href="/Hexo/categories/SpringCloud/">SpringCloud</a> / <a href="/Hexo/categories/SpringCloud/Kafka/">Kafka</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Hexo/2024/07/19/2024-H2/2024-07-19-21-29-10/"><img src="/Hexo/gallery/defaultThumbnail7.png" alt="Kafka Producerä¹‹äº‹åŠ¡æ€§"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-07-19T21:29:12.000Z">2024-07-19</time></p><p class="title"><a href="/Hexo/2024/07/19/2024-H2/2024-07-19-21-29-10/">Kafka Producerä¹‹äº‹åŠ¡æ€§</a></p><p class="categories"><a href="/Hexo/categories/SpringCloud/">SpringCloud</a> / <a href="/Hexo/categories/SpringCloud/Kafka/">Kafka</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Hexo/2024/07/18/2024-H2/2024-07-18-21-10-28/"><img src="/Hexo/gallery/defaultThumbnail1.png" alt="Kafka Producerä¹‹å¹‚ç­‰æ€§"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-07-18T21:10:29.000Z">2024-07-18</time></p><p class="title"><a href="/Hexo/2024/07/18/2024-H2/2024-07-18-21-10-28/">Kafka Producerä¹‹å¹‚ç­‰æ€§</a></p><p class="categories"><a href="/Hexo/categories/SpringCloud/">SpringCloud</a> / <a href="/Hexo/categories/SpringCloud/Kafka/">Kafka</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="/Hexo/archives/2024/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/04/"><span class="level-start"><span class="level-item">å››æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2024</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2024/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2023/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2023/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2023/10/"><span class="level-start"><span class="level-item">åæœˆ 2023</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2023/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/Hexo/archives/2021/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/Hexo/"><img src="/Hexo/img/logo.svg" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2024 Xiamu</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span></p><p class="is-size-7">Â© 2024 Xiamu â„ï¸</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/Hexo/js/column.js"></script><script src="/Hexo/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/Hexo/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/Hexo/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/Hexo/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/Hexo/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/Hexo/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>